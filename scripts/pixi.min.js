/*

 pixi.js - v1.5.3
 Copyright (c) 2012-2014, Mat Groves
 http://goodboydigital.com/

 Compiled: 2014-04-24

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license.php
*/
(function(){var d=d||{};d.WEBGL_RENDERER=0;d.CANVAS_RENDERER=1;d.VERSION="v1.5.3";d.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16};d.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1};d.INTERACTION_FREQUENCY=30;d.AUTO_PREVENT_DEFAULT=!0;d.RAD_TO_DEG=180/Math.PI;d.DEG_TO_RAD=Math.PI/180;d.Point=function(c,e){this.x=c||0;this.y=e||0};d.Point.prototype.clone=
function(){return new d.Point(this.x,this.y)};d.Point.prototype.constructor=d.Point;d.Point.prototype.set=function(c,e){this.x=c||0;this.y=e||(0!==e?this.x:0)};d.Rectangle=function(c,e,k,d){this.x=c||0;this.y=e||0;this.width=k||0;this.height=d||0};d.Rectangle.prototype.clone=function(){return new d.Rectangle(this.x,this.y,this.width,this.height)};d.Rectangle.prototype.contains=function(c,e){if(0>=this.width||0>=this.height)return!1;var k=this.x;return c>=k&&c<=k+this.width&&(k=this.y,e>=k&&e<=k+this.height)?
!0:!1};d.Rectangle.prototype.constructor=d.Rectangle;d.EmptyRectangle=new d.Rectangle(0,0,0,0);d.Polygon=function(c){if(c instanceof Array||(c=Array.prototype.slice.call(arguments)),"number"==typeof c[0]){for(var e=[],k=0,f=c.length;f>k;k+=2)e.push(new d.Point(c[k],c[k+1]));c=e}this.points=c};d.Polygon.prototype.clone=function(){for(var c=[],e=0;e<this.points.length;e++)c.push(this.points[e].clone());return new d.Polygon(c)};d.Polygon.prototype.contains=function(c,e){for(var k=!1,d=0,h=this.points.length-
1;d<this.points.length;h=d++){var l=this.points[d].x,m=this.points[d].y,n=this.points[h].x,h=this.points[h].y;m>e!=h>e&&(n-l)*(e-m)/(h-m)+l>c&&(k=!k)}return k};d.Polygon.prototype.constructor=d.Polygon;d.Circle=function(c,e,k){this.x=c||0;this.y=e||0;this.radius=k||0};d.Circle.prototype.clone=function(){return new d.Circle(this.x,this.y,this.radius)};d.Circle.prototype.contains=function(c,e){if(0>=this.radius)return!1;var k=this.x-c,d=this.y-e,h=this.radius*this.radius;return k*=k,d*=d,h>=k+d};d.Circle.prototype.constructor=
d.Circle;d.Ellipse=function(c,e,k,d){this.x=c||0;this.y=e||0;this.width=k||0;this.height=d||0};d.Ellipse.prototype.clone=function(){return new d.Ellipse(this.x,this.y,this.width,this.height)};d.Ellipse.prototype.contains=function(c,e){if(0>=this.width||0>=this.height)return!1;var k=(c-this.x)/this.width,d=(e-this.y)/this.height;return k*=k,d*=d,1>=k+d};d.Ellipse.prototype.getBounds=function(){return new d.Rectangle(this.x,this.y,this.width,this.height)};d.Ellipse.prototype.constructor=d.Ellipse;d.determineMatrixArrayType=
function(){return"undefined"!=typeof Float32Array?Float32Array:Array};d.Matrix2=d.determineMatrixArrayType();d.Matrix=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0};d.Matrix.prototype.fromArray=function(c){this.a=c[0];this.b=c[1];this.c=c[3];this.d=c[4];this.tx=c[2];this.ty=c[5]};d.Matrix.prototype.toArray=function(c){this.array||(this.array=new Float32Array(9));var e=this.array;return c?(this.array[0]=this.a,this.array[1]=this.c,this.array[2]=0,this.array[3]=this.b,this.array[4]=
this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty,this.array[8]=1):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0,this.array[8]=1),e};d.identityMatrix=new d.Matrix;d.DisplayObject=function(){this.position=new d.Point;this.scale=new d.Point(1,1);this.pivot=new d.Point(0,0);this.rotation=0;this.alpha=1;this.visible=!0;this.hitArea=null;this.renderable=this.buttonMode=!1;
this.stage=this.parent=null;this.worldAlpha=1;this._interactive=!1;this.defaultCursor="pointer";this.worldTransform=new d.Matrix;this.color=[];this.dynamic=!0;this._sr=0;this._cr=1;this.filterArea=null;this._bounds=new d.Rectangle(0,0,1,1);this._mask=this._currentBounds=null;this._cacheIsDirty=this._cacheAsBitmap=!1};d.DisplayObject.prototype.constructor=d.DisplayObject;d.DisplayObject.prototype.setInteractive=function(c){this.interactive=c};Object.defineProperty(d.DisplayObject.prototype,"interactive",
{get:function(){return this._interactive},set:function(c){this._interactive=c;this.stage&&(this.stage.dirty=!0)}});Object.defineProperty(d.DisplayObject.prototype,"worldVisible",{get:function(){var c=this;do{if(!c.visible)return!1;c=c.parent}while(c);return!0}});Object.defineProperty(d.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(c){this._mask&&(this._mask.isMask=!1);(this._mask=c)&&(this._mask.isMask=!0)}});Object.defineProperty(d.DisplayObject.prototype,"filters",
{get:function(){return this._filters},set:function(c){if(c){for(var e=[],k=0;k<c.length;k++)for(var d=c[k].passes,h=0;h<d.length;h++)e.push(d[h]);this._filterBlock={target:this,filterPasses:e}}this._filters=c}});Object.defineProperty(d.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(c){this._cacheAsBitmap!==c&&(c?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=c)}});d.DisplayObject.prototype.updateTransform=function(){this.rotation!==
this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var c=this.parent.worldTransform,e=this.worldTransform,k=this.pivot.x,d=this.pivot.y,h=this._cr*this.scale.x,l=-this._sr*this.scale.y,m=this._sr*this.scale.x,n=this._cr*this.scale.y,q=this.position.x-h*k-d*l,k=this.position.y-n*d-k*m,d=c.a,p=c.b,u=c.c,v=c.d;e.a=d*h+p*m;e.b=d*l+p*n;e.tx=d*q+p*k+c.tx;e.c=u*h+v*m;e.d=u*l+v*n;e.ty=u*q+v*k+c.ty;this.worldAlpha=this.alpha*this.parent.worldAlpha};
d.DisplayObject.prototype.getBounds=function(c){return d.EmptyRectangle};d.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(d.identityMatrix)};d.DisplayObject.prototype.setStageReference=function(c){this.stage=c;this._interactive&&(this.stage.dirty=!0)};d.DisplayObject.prototype.generateTexture=function(c){var e=this.getLocalBounds();c=new d.RenderTexture(0|e.width,0|e.height,c);return c.render(this,new d.Point(-e.x,-e.y)),c};d.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()};
d.DisplayObject.prototype._renderCachedSprite=function(c){c.gl?d.Sprite.prototype._renderWebGL.call(this._cachedSprite,c):d.Sprite.prototype._renderCanvas.call(this._cachedSprite,c)};d.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var c=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|c.width,0|c.height);else{var e=new d.RenderTexture(0|c.width,0|c.height);this._cachedSprite=new d.Sprite(e);this._cachedSprite.worldTransform=this.worldTransform}e=
this._filters;this._filters=null;this._cachedSprite.filters=e;this._cachedSprite.texture.render(this,new d.Point(-c.x,-c.y));this._cachedSprite.anchor.x=-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._filters=e;this._cacheAsBitmap=!0};d.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)};d.DisplayObject.prototype._renderWebGL=function(c){};d.DisplayObject.prototype._renderCanvas=function(c){};
Object.defineProperty(d.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(c){this.position.x=c}});Object.defineProperty(d.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(c){this.position.y=c}});d.DisplayObjectContainer=function(){d.DisplayObject.call(this);this.children=[]};d.DisplayObjectContainer.prototype=Object.create(d.DisplayObject.prototype);d.DisplayObjectContainer.prototype.constructor=d.DisplayObjectContainer;d.DisplayObjectContainer.prototype.addChild=
function(c){this.addChildAt(c,this.children.length)};d.DisplayObjectContainer.prototype.addChildAt=function(c,e){if(!(0<=e&&e<=this.children.length))throw Error(c+" The index "+e+" supplied is out of bounds "+this.children.length);c.parent&&c.parent.removeChild(c);c.parent=this;this.children.splice(e,0,c);this.stage&&c.setStageReference(this.stage)};d.DisplayObjectContainer.prototype.swapChildren=function(c,e){if(c!==e){var k=this.children.indexOf(c),d=this.children.indexOf(e);if(0>k||0>d)throw Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
this.children[k]=e;this.children[d]=c}};d.DisplayObjectContainer.prototype.getChildAt=function(c){if(0<=c&&c<this.children.length)return this.children[c];throw Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller");};d.DisplayObjectContainer.prototype.removeChild=function(c){return this.removeChildAt(this.children.indexOf(c))};d.DisplayObjectContainer.prototype.removeChildAt=function(c){var e=this.getChildAt(c);return this.stage&&e.removeStageReference(),
e.parent=void 0,this.children.splice(c,1),e};d.DisplayObjectContainer.prototype.removeChildren=function(c,e){var k=c||0,d="number"==typeof e?e:this.children.length,h=d-k;if(0<h&&d>=h){k=this.children.splice(k,h);for(d=0;d<k.length;d++)h=k[d],this.stage&&h.removeStageReference(),h.parent=void 0;return k}throw Error("Range Error, numeric values are outside the acceptable range");};d.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(d.DisplayObject.prototype.updateTransform.call(this),
!this._cacheAsBitmap))for(var c=0,e=this.children.length;e>c;c++)this.children[c].updateTransform()};d.DisplayObjectContainer.prototype.getBounds=function(c){if(0===this.children.length)return d.EmptyRectangle;if(c){var e=this.worldTransform;this.worldTransform=c;this.updateTransform();this.worldTransform=e}for(var k,f,h,e=1/0,l=1/0,m=-1/0,n=-1/0,q=!1,p=0,u=this.children.length;u>p;p++)this.children[p].visible&&(q=!0,k=this.children[p].getBounds(c),e=e<k.x?e:k.x,l=l<k.y?l:k.y,f=k.width+k.x,h=k.height+
k.y,m=m>f?m:f,n=n>h?n:h);if(!q)return d.EmptyRectangle;c=this._bounds;return c.x=e,c.y=l,c.width=m-e,c.height=n-l,c};d.DisplayObjectContainer.prototype.getLocalBounds=function(){var c=this.worldTransform;this.worldTransform=d.identityMatrix;for(var e=0,k=this.children.length;k>e;e++)this.children[e].updateTransform();e=this.getBounds();return this.worldTransform=c,e};d.DisplayObjectContainer.prototype.setStageReference=function(c){this.stage=c;this._interactive&&(this.stage.dirty=!0);for(var e=0,
k=this.children.length;k>e;e++)this.children[e].setStageReference(c)};d.DisplayObjectContainer.prototype.removeStageReference=function(){for(var c=0,e=this.children.length;e>c;c++)this.children[c].removeStageReference();this._interactive&&(this.stage.dirty=!0);this.stage=null};d.DisplayObjectContainer.prototype._renderWebGL=function(c){if(this.visible&&!(0>=this.alpha)){if(this._cacheAsBitmap)return this._renderCachedSprite(c),void 0;var e,k;if(this._mask||this._filters){this._mask&&(c.spriteBatch.stop(),
c.maskManager.pushMask(this.mask,c),c.spriteBatch.start());this._filters&&(c.spriteBatch.flush(),c.filterManager.pushFilter(this._filterBlock));e=0;for(k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop();this._filters&&c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);c.spriteBatch.start()}else for(e=0,k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c)}};d.DisplayObjectContainer.prototype._renderCanvas=function(c){if(!1!==this.visible&&
0!==this.alpha){if(this._cacheAsBitmap)return this._renderCachedSprite(c),void 0;this._mask&&c.maskManager.pushMask(this._mask,c.context);for(var e=0,k=this.children.length;k>e;e++)this.children[e]._renderCanvas(c);this._mask&&c.maskManager.popMask(c.context)}};d.Sprite=function(c){d.DisplayObjectContainer.call(this);this.anchor=new d.Point;this.texture=c;this._height=this._width=0;this.tint=16777215;this.blendMode=d.blendModes.NORMAL;c.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=
this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind));this.renderable=!0};d.Sprite.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Sprite.prototype.constructor=d.Sprite;Object.defineProperty(d.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(c){this.scale.x=c/this.texture.frame.width;this._width=c}});Object.defineProperty(d.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},
set:function(c){this.scale.y=c/this.texture.frame.height;this._height=c}});d.Sprite.prototype.setTexture=function(c){this.texture.baseTexture!==c.baseTexture?(this.textureChange=!0,this.texture=c):this.texture=c;this.cachedTint=16777215;this.updateFrame=!0};d.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width);this._height&&(this.scale.y=this._height/this.texture.frame.height);this.updateFrame=!0};d.Sprite.prototype.getBounds=function(c){var e=
this.texture.frame.width,k=this.texture.frame.height,d=e*(1-this.anchor.x),h=e*-this.anchor.x,l=k*(1-this.anchor.y),m=k*-this.anchor.y;c=c||this.worldTransform;var n=c.a,q=c.c,p=c.b,u=c.d,v=c.tx,t=c.ty;c=n*h+p*m+v;var k=u*m+q*h+t,e=n*d+p*m+v,m=u*m+q*d+t,s=n*d+p*l+v,d=u*l+q*d+t,n=n*h+p*l+v,h=u*l+q*h+t,l=-1/0,q=-1/0,u=1/0,p=1/0,u=u>c?c:u,u=u>e?e:u,u=u>s?s:u,u=u>n?n:u,p=p>k?k:p,p=p>m?m:p,p=p>d?d:p,p=p>h?h:p,l=c>l?c:l,l=e>l?e:l,l=s>l?s:l,q=k>q?k:q,q=m>q?m:q,q=d>q?d:q;c=this._bounds;return c.x=u,c.width=
(n>l?n:l)-u,c.y=p,c.height=(h>q?h:q)-p,this._currentBounds=c,c};d.Sprite.prototype._renderWebGL=function(c){if(this.visible&&!(0>=this.alpha)){var e,k;if(this._mask||this._filters){var d=c.spriteBatch;this._mask&&(d.stop(),c.maskManager.pushMask(this.mask,c),d.start());this._filters&&(d.flush(),c.filterManager.pushFilter(this._filterBlock));d.render(this);e=0;for(k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c);d.stop();this._filters&&c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);
d.start()}else for(c.spriteBatch.render(this),e=0,k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c)}};d.Sprite.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha){var e=this.texture.frame,k=c.context,f=this.texture;if(this.blendMode!==c.currentBlendMode&&(c.currentBlendMode=this.blendMode,k.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]),this._mask&&c.maskManager.pushMask(this._mask,c.context),e&&e.width&&e.height&&f.baseTexture.source){k.globalAlpha=
this.worldAlpha;var h=this.worldTransform;if(c.roundPixels?k.setTransform(h.a,h.c,h.b,h.d,0|h.tx,0|h.ty):k.setTransform(h.a,h.c,h.b,h.d,h.tx,h.ty),c.smoothProperty&&c.scaleMode!==this.texture.baseTexture.scaleMode&&(c.scaleMode=this.texture.baseTexture.scaleMode,k[c.smoothProperty]=c.scaleMode===d.scaleModes.LINEAR),16777215!==this.tint){if(this.cachedTint!==this.tint){if(!f.baseTexture.hasLoaded)return;this.cachedTint=this.tint;this.tintedTexture=d.CanvasTinter.getTintedTexture(this,this.tint)}k.drawImage(this.tintedTexture,
0,0,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}else f.trim?(f=f.trim,k.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,f.x-this.anchor.x*f.width,f.y-this.anchor.y*f.height,e.width,e.height)):k.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}e=0;for(k=this.children.length;k>e;e++)this.children[e]._renderCanvas(c);this._mask&&c.maskManager.popMask(c.context)}};
d.Sprite.fromFrame=function(c){var e=d.TextureCache[c];if(!e)throw Error('The frameId "'+c+'" does not exist in the texture cache'+this);return new d.Sprite(e)};d.Sprite.fromImage=function(c,e,k){c=d.Texture.fromImage(c,e,k);return new d.Sprite(c)};d.SpriteBatch=function(c){d.DisplayObjectContainer.call(this);this.textureThing=c;this.ready=!1};d.SpriteBatch.prototype=Object.create(d.DisplayObjectContainer.prototype);d.SpriteBatch.constructor=d.SpriteBatch;d.SpriteBatch.prototype.initWebGL=function(c){this.fastSpriteBatch=
new d.WebGLFastSpriteBatch(c);this.ready=!0};d.SpriteBatch.prototype.updateTransform=function(){d.DisplayObject.prototype.updateTransform.call(this)};d.SpriteBatch.prototype._renderWebGL=function(c){!this.visible||0>=this.alpha||!this.children.length||(this.ready||this.initWebGL(c.gl),c.spriteBatch.stop(),c.shaderManager.activateShader(c.shaderManager.fastShader),this.fastSpriteBatch.begin(this,c),this.fastSpriteBatch.render(this),c.shaderManager.activateShader(c.shaderManager.defaultShader),c.spriteBatch.start())};
d.SpriteBatch.prototype._renderCanvas=function(c){var e=c.context;e.globalAlpha=this.worldAlpha;d.DisplayObject.prototype.updateTransform.call(this);for(var k=this.worldTransform,f=!0,h=0;h<this.children.length;h++){var l=this.children[h];if(l.visible){var m=l.texture,n=m.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,0===l.rotation%(2*Math.PI))f&&(e.setTransform(k.a,k.c,k.b,k.d,k.tx,k.ty),f=!1),e.drawImage(m.baseTexture.source,n.x,n.y,n.width,n.height,l.anchor.x*-n.width*l.scale.x+l.position.x+0.5|
0,l.anchor.y*-n.height*l.scale.y+l.position.y+0.5|0,n.width*l.scale.x,n.height*l.scale.y);else{f||(f=!0);d.DisplayObject.prototype.updateTransform.call(l);var q=l.worldTransform;c.roundPixels?e.setTransform(q.a,q.c,q.b,q.d,0|q.tx,0|q.ty):e.setTransform(q.a,q.c,q.b,q.d,q.tx,q.ty);e.drawImage(m.baseTexture.source,n.x,n.y,n.width,n.height,l.anchor.x*-n.width+0.5|0,l.anchor.y*-n.height+0.5|0,n.width,n.height)}}}};d.MovieClip=function(c){d.Sprite.call(this,c[0]);this.textures=c;this.animationSpeed=1;this.loop=
!0;this.onComplete=null;this.currentFrame=0;this.playing=!1};d.MovieClip.prototype=Object.create(d.Sprite.prototype);d.MovieClip.prototype.constructor=d.MovieClip;Object.defineProperty(d.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}});d.MovieClip.prototype.stop=function(){this.playing=!1};d.MovieClip.prototype.play=function(){this.playing=!0};d.MovieClip.prototype.gotoAndStop=function(c){this.playing=!1;this.currentFrame=c;this.setTexture(this.textures[(this.currentFrame+
0.5|0)%this.textures.length])};d.MovieClip.prototype.gotoAndPlay=function(c){this.currentFrame=c;this.playing=!0};d.MovieClip.prototype.updateTransform=function(){if(d.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var c=this.currentFrame+0.5|0;this.loop||c<this.textures.length?this.setTexture(this.textures[c%this.textures.length]):c>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}};d.MovieClip.prototype.fromFrames=
function(c){for(var e=[],k=0;k<c.length;k++)e.push(new d.Texture.fromFrame(c[k]));return new d.MovieClip(e)};d.MovieClip.prototype.fromImages=function(c){for(var e=[],k=0;k<c.length;k++)e.push(new d.Texture.fromImage(c[k]));return new d.MovieClip(e)};d.FilterBlock=function(){this.renderable=this.visible=!0};d.Text=function(c,e){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");d.Sprite.call(this,d.Texture.fromCanvas(this.canvas));this.setText(c);this.setStyle(e);
this.updateText();this.dirty=!1};d.Text.prototype=Object.create(d.Sprite.prototype);d.Text.prototype.constructor=d.Text;d.Text.prototype.setStyle=function(c){c=c||{};c.font=c.font||"bold 20pt Arial";c.fill=c.fill||"black";c.align=c.align||"left";c.stroke=c.stroke||"black";c.strokeThickness=c.strokeThickness||0;c.wordWrap=c.wordWrap||!1;c.wordWrapWidth=c.wordWrapWidth||100;c.wordWrapWidth=c.wordWrapWidth||100;c.dropShadow=c.dropShadow||!1;c.dropShadowAngle=c.dropShadowAngle||Math.PI/6;c.dropShadowDistance=
c.dropShadowDistance||4;c.dropShadowColor=c.dropShadowColor||"black";this.style=c;this.dirty=!0};d.Text.prototype.setText=function(c){this.text=c.toString()||" ";this.dirty=!0};d.Text.prototype.updateText=function(){this.context.font=this.style.font;var c=this.text;this.style.wordWrap&&(c=this.wordWrap(this.text));for(var c=c.split(/(?:\r\n|\r|\n)/),e=[],k=0,d=0;d<c.length;d++){var h=this.context.measureText(c[d]).width;e[d]=h;k=Math.max(k,h)}d=k+this.style.strokeThickness;this.style.dropShadow&&
(d+=this.style.dropShadowDistance);this.canvas.width=d+this.context.lineWidth;h=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;d=h*c.length;this.style.dropShadow&&(d+=this.style.dropShadowDistance);this.canvas.height=d;navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.font=this.style.font;this.context.strokeStyle=this.style.stroke;this.context.lineWidth=this.style.strokeThickness;this.context.textBaseline="top";var l,
m;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;for(var n=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,q=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=0;d<c.length;d++)l=this.style.strokeThickness/2,m=this.style.strokeThickness/2+d*h,"right"===this.style.align?l+=k-e[d]:"center"===this.style.align&&(l+=(k-e[d])/2),this.style.fill&&this.context.fillText(c[d],l+n,m+q)}this.context.fillStyle=this.style.fill;for(d=0;d<c.length;d++)l=
this.style.strokeThickness/2,m=this.style.strokeThickness/2+d*h,"right"===this.style.align?l+=k-e[d]:"center"===this.style.align&&(l+=(k-e[d])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(c[d],l,m),this.style.fill&&this.context.fillText(c[d],l,m);this.updateTexture()};d.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width;this.texture.baseTexture.height=this.canvas.height;this.texture.frame.width=this.canvas.width;this.texture.frame.height=
this.canvas.height;this._width=this.canvas.width;this._height=this.canvas.height;this.requiresUpdate=!0};d.Text.prototype._renderWebGL=function(c){this.requiresUpdate&&(this.requiresUpdate=!1,d.updateWebGLTexture(this.texture.baseTexture,c.gl));d.Sprite.prototype._renderWebGL.call(this,c)};d.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);d.Sprite.prototype.updateTransform.call(this)};d.Text.prototype.determineFontHeight=function(c){var e=d.Text.heightCache[c];
if(!e){var k=document.getElementsByTagName("body")[0],f=document.createElement("div"),e=document.createTextNode("M");f.appendChild(e);f.setAttribute("style",c+";position:absolute;top:0;left:0");k.appendChild(f);e=f.offsetHeight;d.Text.heightCache[c]=e;k.removeChild(f)}return e};d.Text.prototype.wordWrap=function(c){var e="";c=c.split("\n");for(var d=0;d<c.length;d++){for(var f=this.style.wordWrapWidth,h=c[d].split(" "),l=0;l<h.length;l++){var m=this.context.measureText(h[l]).width,n=m+this.context.measureText(" ").width;
0===l||n>f?(0<l&&(e+="\n"),e+=h[l],f=this.style.wordWrapWidth-m):(f-=n,e+=" "+h[l])}d<c.length-1&&(e+="\n")}return e};d.Text.prototype.destroy=function(c){c&&this.texture.destroy()};d.Text.heightCache={};d.BitmapText=function(c,e){d.DisplayObjectContainer.call(this);this._pool=[];this.setText(c);this.setStyle(e);this.updateText();this.dirty=!1};d.BitmapText.prototype=Object.create(d.DisplayObjectContainer.prototype);d.BitmapText.prototype.constructor=d.BitmapText;d.BitmapText.prototype.setText=function(c){this.text=
c||" ";this.dirty=!0};d.BitmapText.prototype.setStyle=function(c){c=c||{};c.align=c.align||"left";this.style=c;var e=c.font.split(" ");this.fontName=e[e.length-1];this.fontSize=2<=e.length?parseInt(e[e.length-2],10):d.BitmapText.fonts[this.fontName].size;this.dirty=!0;this.tint=c.tint};d.BitmapText.prototype.updateText=function(){for(var c=d.BitmapText.fonts[this.fontName],e=new d.Point,k=null,f=[],h=0,l=[],m=0,n=this.fontSize/c.size,q=0;q<this.text.length;q++){var p=this.text.charCodeAt(q);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(q)))l.push(e.x),
h=Math.max(h,e.x),m++,e.x=0,e.y+=c.lineHeight,k=null;else{var u=c.chars[p];u&&(k&&u[k]&&(e.x+=u.kerning[k]),f.push({texture:u.texture,line:m,charCode:p,position:new d.Point(e.x+u.xOffset,e.y+u.yOffset)}),e.x+=u.xAdvance,k=p)}}l.push(e.x);h=Math.max(h,e.x);k=[];for(q=0;m>=q;q++)p=0,"right"===this.style.align?p=h-l[q]:"center"===this.style.align&&(p=(h-l[q])/2),k.push(p);m=this.children.length;l=f.length;p=this.tint||16777215;for(q=0;l>q;q++)(u=m>q?this.children[q]:this._pool.pop())?u.setTexture(f[q].texture):
u=new d.Sprite(f[q].texture),u.position.x=(f[q].position.x+k[f[q].line])*n,u.position.y=f[q].position.y*n,u.scale.x=u.scale.y=n,u.tint=p,u.parent||this.addChild(u);for(;this.children.length>l;)f=this.getChildAt(this.children.length-1),this._pool.push(f),this.removeChild(f);this.textWidth=h*n;this.textHeight=(e.y+c.lineHeight)*n};d.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);d.DisplayObjectContainer.prototype.updateTransform.call(this)};d.BitmapText.fonts=
{};d.InteractionData=function(){this.global=new d.Point;this.originalEvent=this.target=null};d.InteractionData.prototype.getLocalPosition=function(c){var e=c.worldTransform;c=this.global;var k=e.a,f=e.b,h=e.tx,l=e.c,m=e.d,e=e.ty,n=1/(k*m+f*-l);return new d.Point(m*n*c.x+-f*n*c.y+(e*f-h*m)*n,k*n*c.y+-l*n*c.x+(-e*k+h*l)*n)};d.InteractionData.prototype.constructor=d.InteractionData;d.InteractionManager=function(c){this.stage=c;this.mouse=new d.InteractionData;this.touchs={};this.tempPoint=new d.Point;
this.mouseoverEnabled=!0;this.pool=[];this.interactiveItems=[];this.interactionDOMElement=null;this.onMouseMove=this.onMouseMove.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this.mouseOut=!1};d.InteractionManager.prototype.constructor=
d.InteractionManager;d.InteractionManager.prototype.collectInteractiveSprite=function(c,e){for(var d=c.children,f=d.length-1;0<=f;f--){var h=d[f];h._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(h),0<h.children.length&&this.collectInteractiveSprite(h,h)):(h.__iParent=null,0<h.children.length&&this.collectInteractiveSprite(h,e))}};d.InteractionManager.prototype.setTarget=function(c){this.target=c;null===this.interactionDOMElement&&this.setTargetDomElement(c.view)};d.InteractionManager.prototype.setTargetDomElement=
function(c){this.removeEvents();window.navigator.msPointerEnabled&&(c.style["-ms-content-zooming"]="none",c.style["-ms-touch-action"]="none");this.interactionDOMElement=c;c.addEventListener("mousemove",this.onMouseMove,!0);c.addEventListener("mousedown",this.onMouseDown,!0);c.addEventListener("mouseout",this.onMouseOut,!0);c.addEventListener("touchstart",this.onTouchStart,!0);c.addEventListener("touchend",this.onTouchEnd,!0);c.addEventListener("touchmove",this.onTouchMove,!0);window.addEventListener("mouseup",
this.onMouseUp,!0)};d.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",
this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))};d.InteractionManager.prototype.update=function(){if(this.target){var c=Date.now(),e=c-this.last;if(e=e*d.INTERACTION_FREQUENCY/1E3,!(1>e)){this.last=c;c=0;if(this.dirty){this.dirty=!1;e=this.interactiveItems.length;for(c=0;e>c;c++)this.interactiveItems[c].interactiveChildren=
!1;this.interactiveItems=[];this.stage.interactive&&this.interactiveItems.push(this.stage);this.collectInteractiveSprite(this.stage,this.stage)}for(var e=this.interactiveItems.length,k="inherit",f=!1,c=0;e>c;c++){var h=this.interactiveItems[c];h.__hit=this.hitTest(h,this.mouse);this.mouse.target=h;h.__hit&&!f?(h.buttonMode&&(k=h.defaultCursor),h.interactiveChildren||(f=!0),h.__isOver||(h.mouseover&&h.mouseover(this.mouse),h.__isOver=!0)):h.__isOver&&(h.mouseout&&h.mouseout(this.mouse),h.__isOver=
!1)}this.currentCursorStyle!==k&&(this.currentCursorStyle=k,this.interactionDOMElement.style.cursor=k)}}};d.InteractionManager.prototype.onMouseMove=function(c){this.mouse.originalEvent=c||window.event;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=this.target.width/e.width*(c.clientX-e.left);this.mouse.global.y=this.target.height/e.height*(c.clientY-e.top);c=this.interactiveItems.length;for(e=0;c>e;e++){var d=this.interactiveItems[e];d.mousemove&&d.mousemove(this.mouse)}};
d.InteractionManager.prototype.onMouseDown=function(c){this.mouse.originalEvent=c||window.event;d.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();c=this.interactiveItems.length;for(var e=0;c>e;e++){var k=this.interactiveItems[e];if((k.mousedown||k.click)&&(k.__mouseIsDown=!0,k.__hit=this.hitTest(k,this.mouse),k.__hit&&(k.mousedown&&k.mousedown(this.mouse),k.__isDown=!0,!k.interactiveChildren)))break}};d.InteractionManager.prototype.onMouseOut=function(){var c=this.interactiveItems.length;
this.interactionDOMElement.style.cursor="inherit";for(var e=0;c>e;e++){var d=this.interactiveItems[e];d.__isOver&&(this.mouse.target=d,d.mouseout&&d.mouseout(this.mouse),d.__isOver=!1)}this.mouseOut=!0;this.mouse.global.x=-1E4;this.mouse.global.y=-1E4};d.InteractionManager.prototype.onMouseUp=function(c){this.mouse.originalEvent=c||window.event;c=this.interactiveItems.length;for(var e=!1,d=0;c>d;d++){var f=this.interactiveItems[d];f.__hit=this.hitTest(f,this.mouse);f.__hit&&!e?(f.mouseup&&f.mouseup(this.mouse),
f.__isDown&&f.click&&f.click(this.mouse),f.interactiveChildren||(e=!0)):f.__isDown&&f.mouseupoutside&&f.mouseupoutside(this.mouse);f.__isDown=!1}};d.InteractionManager.prototype.hitTest=function(c,e){var k=e.global;if(!c.worldVisible)return!1;var f=c instanceof d.Sprite,h=c.worldTransform,l=h.a,m=h.b,n=h.tx,q=h.c,p=h.d,h=h.ty,u=1/(l*p+m*-q),m=p*u*k.x+-m*u*k.y+(h*m-n*p)*u,k=l*u*k.y+-q*u*k.x+(-h*l+n*q)*u;if(e.target=c,c.hitArea&&c.hitArea.contains)return c.hitArea.contains(m,k)?(e.target=c,!0):!1;if(f){var s,
f=c.texture.frame.width,l=c.texture.frame.height,n=-f*c.anchor.x;if(m>n&&n+f>m&&(s=-l*c.anchor.y,k>s&&s+l>k))return e.target=c,!0}s=c.children.length;for(f=0;s>f;f++)if(this.hitTest(c.children[f],e))return e.target=c,!0;return!1};d.InteractionManager.prototype.onTouchMove=function(c){for(var e,d=this.interactionDOMElement.getBoundingClientRect(),f=c.changedTouches,h=0,h=0;h<f.length;h++){var l=f[h];e=this.touchs[l.identifier];e.originalEvent=c||window.event;e.global.x=this.target.width/d.width*(l.clientX-
d.left);e.global.y=this.target.height/d.height*(l.clientY-d.top);navigator.isCocoonJS&&(e.global.x=l.clientX,e.global.y=l.clientY);for(var m=0;m<this.interactiveItems.length;m++){var n=this.interactiveItems[m];n.touchmove&&n.__touchData[l.identifier]&&n.touchmove(e)}}};d.InteractionManager.prototype.onTouchStart=function(c){var e=this.interactionDOMElement.getBoundingClientRect();d.AUTO_PREVENT_DEFAULT&&c.preventDefault();for(var k=c.changedTouches,f=0;f<k.length;f++){var h=k[f],l=this.pool.pop();
l||(l=new d.InteractionData);l.originalEvent=c||window.event;this.touchs[h.identifier]=l;l.global.x=this.target.width/e.width*(h.clientX-e.left);l.global.y=this.target.height/e.height*(h.clientY-e.top);navigator.isCocoonJS&&(l.global.x=h.clientX,l.global.y=h.clientY);for(var m=this.interactiveItems.length,n=0;m>n;n++){var q=this.interactiveItems[n];if((q.touchstart||q.tap)&&(q.__hit=this.hitTest(q,l),q.__hit&&(q.touchstart&&q.touchstart(l),q.__isDown=!0,q.__touchData=q.__touchData||{},q.__touchData[h.identifier]=
l,!q.interactiveChildren)))break}}};d.InteractionManager.prototype.onTouchEnd=function(c){for(var e=this.interactionDOMElement.getBoundingClientRect(),d=c.changedTouches,f=0;f<d.length;f++){var h=d[f],l=this.touchs[h.identifier],m=!1;l.global.x=this.target.width/e.width*(h.clientX-e.left);l.global.y=this.target.height/e.height*(h.clientY-e.top);navigator.isCocoonJS&&(l.global.x=h.clientX,l.global.y=h.clientY);for(var n=this.interactiveItems.length,q=0;n>q;q++){var p=this.interactiveItems[q];p.__touchData&&
p.__touchData[h.identifier]&&(p.__hit=this.hitTest(p,p.__touchData[h.identifier]),l.originalEvent=c||window.event,(p.touchend||p.tap)&&(p.__hit&&!m?(p.touchend&&p.touchend(l),p.__isDown&&p.tap&&p.tap(l),p.interactiveChildren||(m=!0)):p.__isDown&&p.touchendoutside&&p.touchendoutside(l),p.__isDown=!1),p.__touchData[h.identifier]=null)}this.pool.push(l);this.touchs[h.identifier]=null}};d.Stage=function(c){d.DisplayObjectContainer.call(this);this.worldTransform=new d.Matrix;this.interactive=!0;this.interactionManager=
new d.InteractionManager(this);this.dirty=!0;this.stage=this;this.stage.hitArea=new d.Rectangle(0,0,1E5,1E5);this.setBackgroundColor(c)};d.Stage.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Stage.prototype.constructor=d.Stage;d.Stage.prototype.setInteractionDelegate=function(c){this.interactionManager.setTargetDomElement(c)};d.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var c=0,e=this.children.length;e>c;c++)this.children[c].updateTransform();this.dirty&&(this.dirty=
!1,this.interactionManager.dirty=!0);this.interactive&&this.interactionManager.update()};d.Stage.prototype.setBackgroundColor=function(c){this.backgroundColor=c||0;this.backgroundColorSplit=d.hex2rgb(this.backgroundColor);c=this.backgroundColor.toString(16);c="000000".substr(0,6-c.length)+c;this.backgroundColorString="#"+c};d.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var M=0,L=["ms","moz","webkit","o"],K=0;K<L.length&&!window.requestAnimationFrame;++K)window.requestAnimationFrame=
window[L[K]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[L[K]+"CancelAnimationFrame"]||window[L[K]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var e=(new Date).getTime(),d=Math.max(0,16-(e-M)),f=window.setTimeout(function(){c(e+d)},d);return M=e+d,f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(c){clearTimeout(c)});window.requestAnimFrame=window.requestAnimationFrame;d.hex2rgb=function(c){return[(c>>16&
255)/255,(c>>8&255)/255,(255&c)/255]};d.rgb2hex=function(c){return(255*c[0]<<16)+(255*c[1]<<8)+255*c[2]};"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var c=Array.prototype.slice;return function(e){function d(){var l=h.concat(c.call(arguments));f.apply(this instanceof d?this:e,l)}var f=this,h=c.call(arguments,1);if("function"!=typeof f)throw new TypeError;return d.prototype=function m(c){return c&&(m.prototype=c),this instanceof m?void 0:new m}(f.prototype),d}}());
d.AjaxRequest=function(){var c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<c.length;e++)try{return new window.ActiveXObject(c[e])}catch(d){}};d.canUseNewCanvasBlendModes=function(){var c=document.createElement("canvas");c.width=1;c.height=1;c=c.getContext("2d");return c.fillStyle="#000",c.fillRect(0,0,1,1),c.globalCompositeOperation="multiply",c.fillStyle="#fff",c.fillRect(0,0,1,1),
0===c.getImageData(0,0,1,1).data[0]};d.getNextPowerOfTwo=function(c){if(0<c&&0===(c&c-1))return c;for(var e=1;c>e;)e<<=1;return e};d.EventTarget=function(){var c={};this.addEventListener=this.on=function(e,d){void 0===c[e]&&(c[e]=[]);-1===c[e].indexOf(d)&&c[e].push(d)};this.dispatchEvent=this.emit=function(e){if(c[e.type]&&c[e.type].length)for(var d=0,f=c[e.type].length;f>d;d++)c[e.type][d](e)};this.removeEventListener=this.off=function(e,d){var f=c[e].indexOf(d);-1!==f&&c[e].splice(f,1)};this.removeAllEventListeners=
function(e){(e=c[e])&&(e.length=0)}};d.autoDetectRenderer=function(c,e,k,f,h){c||(c=800);e||(e=600);var l;try{var m=document.createElement("canvas");l=!!window.WebGLRenderingContext&&(m.getContext("webgl")||m.getContext("experimental-webgl"))}catch(n){l=!1}return l?new d.WebGLRenderer(c,e,k,f,h):new d.CanvasRenderer(c,e,k,f)};d.autoDetectRecommendedRenderer=function(c,e,k,f,h){c||(c=800);e||(e=600);var l;try{var m=document.createElement("canvas");l=!!window.WebGLRenderingContext&&(m.getContext("webgl")||
m.getContext("experimental-webgl"))}catch(n){l=!1}m=/Android/i.test(navigator.userAgent);return l&&!m?new d.WebGLRenderer(c,e,k,f,h):new d.CanvasRenderer(c,e,k,f)};d.PolyK={};d.PolyK.Triangulate=function(c){var e=!0,k=c.length>>1;if(3>k)return[];for(var f=[],h=[],l=0;k>l;l++)h.push(l);for(var l=0,m=k;3<m;){var n=h[(l+0)%m],q=h[(l+1)%m],p=h[(l+2)%m],u=c[2*n],s=c[2*n+1],t=c[2*q],w=c[2*q+1],z=c[2*p],y=c[2*p+1],x=!1;if(d.PolyK._convex(u,s,t,w,z,y,e))for(var x=!0,A=0;m>A;A++){var B=h[A];if(B!==n&&B!==
q&&B!==p&&d.PolyK._PointInTriangle(c[2*B],c[2*B+1],u,s,t,w,z,y)){x=!1;break}}if(x)f.push(n,q,p),h.splice((l+1)%m,1),m--,l=0;else if(l++>3*m){if(!e)return window.console.log("PIXI Warning: shape too complex to fill"),[];f=[];h=[];for(l=0;k>l;l++)h.push(l);l=0;m=k;e=!1}}return f.push(h[0],h[1],h[2]),f};d.PolyK._PointInTriangle=function(c,e,d,f,h,l,m,n){m-=d;n-=f;h-=d;l-=f;c-=d;d=e-f;e=m*m+n*n;f=m*h+n*l;m=m*c+n*d;n=h*h+l*l;h=h*c+l*d;l=1/(e*n-f*f);n=(n*m-f*h)*l;m=(e*h-f*m)*l;return 0<=n&&0<=m&&1>n+m};
d.PolyK._convex=function(c,e,d,f,h,l,m){return 0<=(e-f)*(h-d)+(d-c)*(l-f)===m};d.initDefaultShaders=function(){};d.CompileVertexShader=function(c,e){return d._CompileShader(c,e,c.VERTEX_SHADER)};d.CompileFragmentShader=function(c,e){return d._CompileShader(c,e,c.FRAGMENT_SHADER)};d._CompileShader=function(c,e,d){e=e.join("\n");d=c.createShader(d);return c.shaderSource(d,e),c.compileShader(d),c.getShaderParameter(d,c.COMPILE_STATUS)?d:(window.console.log(c.getShaderInfoLog(d)),null)};d.compileProgram=
function(c,e,k){k=d.CompileFragmentShader(c,k);e=d.CompileVertexShader(c,e);var f=c.createProgram();return c.attachShader(f,e),c.attachShader(f,k),c.linkProgram(f),c.getProgramParameter(f,c.LINK_STATUS)||window.console.log("Could not initialise shaders"),f};d.PixiShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
"}"];this.textureCount=0;this.attributes=[];this.init()};d.PixiShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc||d.PixiShader.defaultVertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.dimensions=c.getUniformLocation(e,"dimensions");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aTextureCoord=
c.getAttribLocation(e,"aTextureCoord");this.colorAttribute=c.getAttribLocation(e,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var k in this.uniforms)this.uniforms[k].uniformLocation=c.getUniformLocation(e,k);this.initUniforms();this.program=e};d.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var c,e=this.gl,d;for(d in this.uniforms){c=this.uniforms[d];var f=c.type;"sampler2D"===f?(c._init=
!1,null!==c.value&&this.initSampler2D(c)):"mat2"===f||"mat3"===f||"mat4"===f?(c.glMatrix=!0,c.glValueLength=1,"mat2"===f?c.glFunc=e.uniformMatrix2fv:"mat3"===f?c.glFunc=e.uniformMatrix3fv:"mat4"===f&&(c.glFunc=e.uniformMatrix4fv)):(c.glFunc=e["uniform"+f],c.glValueLength="2f"===f||"2i"===f?2:"3f"===f||"3i"===f?3:"4f"===f||"4i"===f?4:1)}};d.PixiShader.prototype.initSampler2D=function(c){if(c.value&&c.value.baseTexture&&c.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),
e.bindTexture(e.TEXTURE_2D,c.value.baseTexture._glTextures[e.id]),c.textureData){var d=c.textureData,f=d.magFilter?d.magFilter:e.LINEAR,h=d.minFilter?d.minFilter:e.LINEAR,l=d.wrapS?d.wrapS:e.CLAMP_TO_EDGE,m=d.wrapT?d.wrapT:e.CLAMP_TO_EDGE,n=d.luminance?e.LUMINANCE:e.RGBA;(d.repeat&&(l=e.REPEAT,m=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width)?e.texImage2D(e.TEXTURE_2D,0,n,d.width?d.width:512,d.height?d.height:2,d.border?d.border:0,n,e.UNSIGNED_BYTE,null):e.texImage2D(e.TEXTURE_2D,
0,n,e.RGBA,e.UNSIGNED_BYTE,c.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,f);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,h);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,l);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,m)}e.uniform1i(c.uniformLocation,this.textureCount);c._init=!0;this.textureCount++}};d.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var c,e=this.gl,k;for(k in this.uniforms)c=this.uniforms[k],1===c.glValueLength?!0===c.glMatrix?
c.glFunc.call(e,c.uniformLocation,c.transpose,c.value):c.glFunc.call(e,c.uniformLocation,c.value):2===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y):3===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y,c.value.z):4===c.glValueLength?c.glFunc.call(e,c.uniformLocation,c.value.x,c.value.y,c.value.z,c.value.w):"sampler2D"===c.type&&(c._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,c.value.baseTexture._glTextures[e.id]||d.createWebGLTexture(c.value.baseTexture,
e)),e.uniform1i(c.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(c))};d.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=this.uniforms=null};d.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {",
"   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"];d.PixiFastShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
"}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);",
"   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"];this.textureCount=0;this.init()};d.PixiFastShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,
"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.dimensions=c.getUniformLocation(e,"dimensions");this.uMatrix=c.getUniformLocation(e,"uMatrix");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aPositionCoord=c.getAttribLocation(e,"aPositionCoord");this.aScale=c.getAttribLocation(e,"aScale");this.aRotation=c.getAttribLocation(e,"aRotation");this.aTextureCoord=c.getAttribLocation(e,"aTextureCoord");this.colorAttribute=c.getAttribLocation(e,"aColor");
-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute];this.program=e};d.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=this.uniforms=null};d.StripShader=function(){this.program=null;this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;",
"void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","uniform vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;",
"   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]};d.StripShader.prototype.init=function(){var c=d.gl,e=d.compileProgram(c,this.vertexSrc,this.fragmentSrc);c.useProgram(e);this.uSampler=c.getUniformLocation(e,"uSampler");this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.colorAttribute=c.getAttribLocation(e,"aColor");
this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.aTextureCoord=c.getAttribLocation(e,"aTextureCoord");this.translationMatrix=c.getUniformLocation(e,"translationMatrix");this.alpha=c.getUniformLocation(e,"alpha");this.program=e};d.PrimitiveShader=function(c){this.gl=c;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;",
"uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"];this.init()};d.PrimitiveShader.prototype.init=function(){var c=this.gl,e=d.compileProgram(c,this.vertexSrc,
this.fragmentSrc);c.useProgram(e);this.projectionVector=c.getUniformLocation(e,"projectionVector");this.offsetVector=c.getUniformLocation(e,"offsetVector");this.tintColor=c.getUniformLocation(e,"tint");this.aVertexPosition=c.getAttribLocation(e,"aVertexPosition");this.colorAttribute=c.getAttribLocation(e,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=c.getUniformLocation(e,"translationMatrix");this.alpha=c.getUniformLocation(e,"alpha");this.program=e};
d.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attribute=this.gl=this.uniforms=null};d.WebGLGraphics=function(){};d.WebGLGraphics.renderGraphics=function(c,e){var k=e.gl,f=e.projection,h=e.offset,l=e.shaderManager.primitiveShader;c._webGL[k.id]||(c._webGL[k.id]={points:[],indices:[],lastIndex:0,buffer:k.createBuffer(),indexBuffer:k.createBuffer()});var m=c._webGL[k.id];c.dirty&&(c.dirty=!1,c.clearDirty&&(c.clearDirty=!1,m.lastIndex=0,m.points=[],m.indices=
[]),d.WebGLGraphics.updateGraphics(c,k));e.shaderManager.activatePrimitiveShader();k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA);k.uniformMatrix3fv(l.translationMatrix,!1,c.worldTransform.toArray(!0));k.uniform2f(l.projectionVector,f.x,-f.y);k.uniform2f(l.offsetVector,-h.x,-h.y);k.uniform3fv(l.tintColor,d.hex2rgb(c.tint));k.uniform1f(l.alpha,c.worldAlpha);k.bindBuffer(k.ARRAY_BUFFER,m.buffer);k.vertexAttribPointer(l.aVertexPosition,2,k.FLOAT,!1,24,0);k.vertexAttribPointer(l.colorAttribute,4,k.FLOAT,!1,
24,8);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,m.indexBuffer);k.drawElements(k.TRIANGLE_STRIP,m.indices.length,k.UNSIGNED_SHORT,0);e.shaderManager.deactivatePrimitiveShader()};d.WebGLGraphics.updateGraphics=function(c,e){for(var k=c._webGL[e.id],f=k.lastIndex;f<c.graphicsData.length;f++){var h=c.graphicsData[f];h.type===d.Graphics.POLY?(h.fill&&3<h.points.length&&d.WebGLGraphics.buildPoly(h,k),0<h.lineWidth&&d.WebGLGraphics.buildLine(h,k)):h.type===d.Graphics.RECT?d.WebGLGraphics.buildRectangle(h,k):(h.type===
d.Graphics.CIRC||h.type===d.Graphics.ELIP)&&d.WebGLGraphics.buildCircle(h,k)}k.lastIndex=c.graphicsData.length;k.glPoints=new Float32Array(k.points);e.bindBuffer(e.ARRAY_BUFFER,k.buffer);e.bufferData(e.ARRAY_BUFFER,k.glPoints,e.STATIC_DRAW);k.glIndicies=new Uint16Array(k.indices);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,k.indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,k.glIndicies,e.STATIC_DRAW)};d.WebGLGraphics.buildRectangle=function(c,e){var k=c.points,f=k[0],h=k[1],l=k[2],k=k[3];if(c.fill){var m=
d.hex2rgb(c.fillColor),n=c.fillAlpha,q=m[0]*n,p=m[1]*n,m=m[2]*n,u=e.points,s=e.indices,t=u.length/6;u.push(f,h);u.push(q,p,m,n);u.push(f+l,h);u.push(q,p,m,n);u.push(f,h+k);u.push(q,p,m,n);u.push(f+l,h+k);u.push(q,p,m,n);s.push(t,t,t+1,t+2,t+3,t+3)}c.lineWidth&&(n=c.points,c.points=[f,h,f+l,h,f+l,h+k,f,h+k,f,h],d.WebGLGraphics.buildLine(c,e),c.points=n)};d.WebGLGraphics.buildCircle=function(c,e){var k=c.points,f=k[0],h=k[1],l=k[2],k=k[3],m=2*Math.PI/40,n=0;if(c.fill){var n=d.hex2rgb(c.fillColor),q=
c.fillAlpha,p=n[0]*q,u=n[1]*q,s=n[2]*q,t=e.points,w=e.indices,z=t.length/6;w.push(z);for(n=0;41>n;n++)t.push(f,h,p,u,s,q),t.push(f+Math.sin(m*n)*l,h+Math.cos(m*n)*k,p,u,s,q),w.push(z++,z++);w.push(z-1)}if(c.lineWidth){q=c.points;c.points=[];for(n=0;41>n;n++)c.points.push(f+Math.sin(m*n)*l,h+Math.cos(m*n)*k);d.WebGLGraphics.buildLine(c,e);c.points=q}};d.WebGLGraphics.buildLine=function(c,e){var k=0,f=c.points;if(0!==f.length){if(c.lineWidth%2)for(k=0;k<f.length;k++)f[k]+=0.5;var h=new d.Point(f[0],
f[1]),l=new d.Point(f[f.length-2],f[f.length-1]);if(h.x===l.x&&h.y===l.y){f.pop();f.pop();var l=new d.Point(f[f.length-2],f[f.length-1]),m=l.x+0.5*(h.x-l.x),h=l.y+0.5*(h.y-l.y);f.unshift(m,h);f.push(m,h)}var n,q,p,u,s,t,w,z,y,x,A,B,H,I,K,L,N,M,C,m=e.points,h=e.indices,l=f.length/2,P=f.length,O=m.length/6,J=c.lineWidth/2,k=d.hex2rgb(c.lineColor),D=c.lineAlpha,E=k[0]*D,F=k[1]*D,G=k[2]*D;p=f[0];u=f[1];s=f[2];t=f[3];y=-(u-t);x=p-s;C=Math.sqrt(y*y+x*x);y=y/C*J;x=x/C*J;m.push(p-y,u-x,E,F,G,D);m.push(p+
y,u+x,E,F,G,D);for(k=1;l-1>k;k++)p=f[2*(k-1)],u=f[2*(k-1)+1],s=f[2*k],t=f[2*k+1],w=f[2*(k+1)],z=f[2*(k+1)+1],y=-(u-t),x=p-s,C=Math.sqrt(y*y+x*x),y/=C,x/=C,y*=J,x*=J,A=-(t-z),B=s-w,C=Math.sqrt(A*A+B*B),A/=C,B/=C,A*=J,B*=J,K=-x+u-(-x+t),L=-y+s-(-y+p),p=(-y+p)*(-x+t)-(-y+s)*(-x+u),u=-B+z-(-B+t),N=-A+s-(-A+w),w=(-A+w)*(-B+t)-(-A+s)*(-B+z),z=K*N-u*L,0.1>Math.abs(z)?(m.push(s-y,t-x,E,F,G,D),m.push(s+y,t+x,E,F,G,D)):(n=(L*w-N*p)/z,q=(u*p-K*w)/z,M=(n-s)*(n-s)+(q-t)+(q-t),19600<M?(H=y-A,I=x-B,C=Math.sqrt(H*
H+I*I),H/=C,I/=C,H*=J,I*=J,m.push(s-H,t-I),m.push(E,F,G,D),m.push(s+H,t+I),m.push(E,F,G,D),m.push(s-H,t-I),m.push(E,F,G,D),P++):(m.push(n,q),m.push(E,F,G,D),m.push(s-(n-s),t-(q-t)),m.push(E,F,G,D)));p=f[2*(l-2)];u=f[2*(l-2)+1];s=f[2*(l-1)];t=f[2*(l-1)+1];y=-(u-t);x=p-s;C=Math.sqrt(y*y+x*x);y/=C;x/=C;y*=J;x*=J;m.push(s-y,t-x);m.push(E,F,G,D);m.push(s+y,t+x);m.push(E,F,G,D);h.push(O);for(k=0;P>k;k++)h.push(O++);h.push(O-1)}};d.WebGLGraphics.buildPoly=function(c,e){var k=c.points;if(!(6>k.length)){for(var f=
e.points,h=e.indices,l=k.length/2,m=d.hex2rgb(c.fillColor),n=c.fillAlpha,q=m[0]*n,p=m[1]*n,m=m[2]*n,u=d.PolyK.Triangulate(k),s=f.length/6,t=0,t=0;t<u.length;t+=3)h.push(u[t]+s),h.push(u[t]+s),h.push(u[t+1]+s),h.push(u[t+2]+s),h.push(u[t+2]+s);for(t=0;l>t;t++)f.push(k[2*t],k[2*t+1],q,p,m,n)}};d.glContexts=[];d.WebGLRenderer=function(c,e,k,f,h){d.defaultRenderer||(d.defaultRenderer=this);this.type=d.WEBGL_RENDERER;this.transparent=!!f;this.width=c||800;this.height=e||600;this.view=k||document.createElement("canvas");
this.view.width=this.width;this.view.height=this.height;this.contextLost=this.handleContextLost.bind(this);this.contextRestoredLost=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.contextLost,!1);this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1);this.options={alpha:this.transparent,antialias:!!h,premultipliedAlpha:!!f,stencil:!0};try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(l){try{this.gl=this.view.getContext("webgl",
this.options)}catch(m){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this);}}c=this.gl;this.glContextId=c.id=d.WebGLRenderer.glContextId++;d.glContexts[this.glContextId]=c;d.blendModesWebGL||(d.blendModesWebGL=[],d.blendModesWebGL[d.blendModes.NORMAL]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.ADD]=[c.SRC_ALPHA,c.DST_ALPHA],d.blendModesWebGL[d.blendModes.MULTIPLY]=[c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SCREEN]=[c.SRC_ALPHA,
c.ONE],d.blendModesWebGL[d.blendModes.OVERLAY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.DARKEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LIGHTEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_DODGE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_BURN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HARD_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SOFT_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],
d.blendModesWebGL[d.blendModes.DIFFERENCE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.EXCLUSION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HUE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SATURATION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LUMINOSITY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA]);this.projection=new d.Point;this.projection.x=this.width/2;this.projection.y=
-this.height/2;this.offset=new d.Point(0,0);this.resize(this.width,this.height);this.contextLost=!1;this.shaderManager=new d.WebGLShaderManager(c);this.spriteBatch=new d.WebGLSpriteBatch(c);this.maskManager=new d.WebGLMaskManager(c);this.filterManager=new d.WebGLFilterManager(c,this.transparent);this.renderSession={};this.renderSession.gl=this.gl;this.renderSession.drawCount=0;this.renderSession.shaderManager=this.shaderManager;this.renderSession.maskManager=this.maskManager;this.renderSession.filterManager=
this.filterManager;this.renderSession.spriteBatch=this.spriteBatch;this.renderSession.renderer=this;c.useProgram(this.shaderManager.defaultShader.program);c.disable(c.DEPTH_TEST);c.disable(c.CULL_FACE);c.enable(c.BLEND);c.colorMask(!0,!0,!0,this.transparent)};d.WebGLRenderer.prototype.constructor=d.WebGLRenderer;d.WebGLRenderer.prototype.render=function(c){if(!this.contextLost){this.__stage!==c&&(c.interactive&&c.interactionManager.removeEvents(),this.__stage=c);d.WebGLRenderer.updateTextures();c.updateTransform();
c._interactive&&(c._interactiveEventsAdded||(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this)));var e=this.gl;e.viewport(0,0,this.width,this.height);e.bindFramebuffer(e.FRAMEBUFFER,null);this.transparent?e.clearColor(0,0,0,0):e.clearColor(c.backgroundColorSplit[0],c.backgroundColorSplit[1],c.backgroundColorSplit[2],1);e.clear(e.COLOR_BUFFER_BIT);this.renderDisplayObject(c,this.projection);c.interactive?c._interactiveEventsAdded||(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this)):
c._interactiveEventsAdded&&(c._interactiveEventsAdded=!1,c.interactionManager.setTarget(this))}};d.WebGLRenderer.prototype.renderDisplayObject=function(c,e,d){this.renderSession.drawCount=0;this.renderSession.currentBlendMode=9999;this.renderSession.projection=e;this.renderSession.offset=this.offset;this.spriteBatch.begin(this.renderSession);this.filterManager.begin(this.renderSession,d);c._renderWebGL(this.renderSession);this.spriteBatch.end()};d.WebGLRenderer.updateTextures=function(){for(var c=
0,c=0;c<d.Texture.frameUpdates.length;c++)d.WebGLRenderer.updateTextureFrame(d.Texture.frameUpdates[c]);for(c=0;c<d.texturesToDestroy.length;c++)d.WebGLRenderer.destroyTexture(d.texturesToDestroy[c]);d.texturesToUpdate.length=0;d.texturesToDestroy.length=0;d.Texture.frameUpdates.length=0};d.WebGLRenderer.destroyTexture=function(c){for(var e=c._glTextures.length-1;0<=e;e--){var k=c._glTextures[e],f=d.glContexts[e];f&&k&&f.deleteTexture(k)}c._glTextures.length=0};d.WebGLRenderer.updateTextureFrame=
function(c){c.updateFrame=!1;c._updateWebGLuvs()};d.WebGLRenderer.prototype.resize=function(c,e){this.width=c;this.height=e;this.view.width=c;this.view.height=e;this.gl.viewport(0,0,this.width,this.height);this.projection.x=this.width/2;this.projection.y=-this.height/2};d.createWebGLTexture=function(c,e){return c.hasLoaded&&(c._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,c._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,
e.UNSIGNED_BYTE,c.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),c._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,
null)),c._glTextures[e.id]};d.updateWebGLTexture=function(c,e){c._glTextures[e.id]&&(e.bindTexture(e.TEXTURE_2D,c._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,c.scaleMode===d.scaleModes.LINEAR?e.LINEAR:e.NEAREST),c._powerOf2?(e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))};d.WebGLRenderer.prototype.handleContextLost=function(c){c.preventDefault();this.contextLost=!0};d.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(c){try{this.gl=this.view.getContext("webgl",
this.options)}catch(e){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this);}}var k=this.gl;k.id=d.WebGLRenderer.glContextId++;this.shaderManager.setContext(k);this.spriteBatch.setContext(k);this.maskManager.setContext(k);this.filterManager.setContext(k);this.renderSession.gl=this.gl;k.disable(k.DEPTH_TEST);k.disable(k.CULL_FACE);k.enable(k.BLEND);k.colorMask(!0,!0,!0,this.transparent);this.gl.viewport(0,0,this.width,this.height);for(var f in d.TextureCache)d.TextureCache[f].baseTexture._glTextures=
[];this.contextLost=!1};d.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost);this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost);this.offset=this.projection=d.glContexts[this.glContextId]=null;this.shaderManager.destroy();this.spriteBatch.destroy();this.maskManager.destroy();this.filterManager.destroy();this.renderSession=this.gl=this.filterManager=this.maskManager=this.spriteBatch=this.shaderManager=null};d.WebGLRenderer.glContextId=
0;d.WebGLMaskManager=function(c){this.maskStack=[];this.maskPosition=0;this.setContext(c)};d.WebGLMaskManager.prototype.setContext=function(c){this.gl=c};d.WebGLMaskManager.prototype.pushMask=function(c,e){var k=this.gl;0===this.maskStack.length&&(k.enable(k.STENCIL_TEST),k.stencilFunc(k.ALWAYS,1,1));this.maskStack.push(c);k.colorMask(!1,!1,!1,!1);k.stencilOp(k.KEEP,k.KEEP,k.INCR);d.WebGLGraphics.renderGraphics(c,e);k.colorMask(!0,!0,!0,!0);k.stencilFunc(k.NOTEQUAL,0,this.maskStack.length);k.stencilOp(k.KEEP,
k.KEEP,k.KEEP)};d.WebGLMaskManager.prototype.popMask=function(c){var e=this.gl,k=this.maskStack.pop();k&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),d.WebGLGraphics.renderGraphics(k,c),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskStack.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP));0===this.maskStack.length&&e.disable(e.STENCIL_TEST)};d.WebGLMaskManager.prototype.destroy=function(){this.gl=this.maskStack=null};d.WebGLShaderManager=function(c){this.maxAttibs=10;this.attribState=
[];this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(c)};d.WebGLShaderManager.prototype.setContext=function(c){this.gl=c;this.primitiveShader=new d.PrimitiveShader(c);this.defaultShader=new d.PixiShader(c);this.fastShader=new d.PixiFastShader(c);this.activateShader(this.defaultShader)};d.WebGLShaderManager.prototype.setAttribs=function(c){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<c.length;e++)this.tempAttribState[c[e]]=
!0;c=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?c.enableVertexAttribArray(e):c.disableVertexAttribArray(e))};d.WebGLShaderManager.prototype.activateShader=function(c){this.currentShader=c;this.gl.useProgram(c.program);this.setAttribs(c.attributes)};d.WebGLShaderManager.prototype.activatePrimitiveShader=function(){this.gl.useProgram(this.primitiveShader.program);this.setAttribs(this.primitiveShader.attributes)};
d.WebGLShaderManager.prototype.deactivatePrimitiveShader=function(){this.gl.useProgram(this.defaultShader.program);this.setAttribs(this.defaultShader.attributes)};d.WebGLShaderManager.prototype.destroy=function(){this.tempAttribState=this.attribState=null;this.primitiveShader.destroy();this.defaultShader.destroy();this.fastShader.destroy();this.gl=null};d.WebGLSpriteBatch=function(c){this.vertSize=6;this.size=2E3;var e=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=
new Uint16Array(e);for(var d=this.lastIndexCount=0,f=0;e>d;d+=6,f+=4)this.indices[d+0]=f+0,this.indices[d+1]=f+1,this.indices[d+2]=f+2,this.indices[d+3]=f+0,this.indices[d+4]=f+2,this.indices[d+5]=f+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.setContext(c)};d.WebGLSpriteBatch.prototype.setContext=function(c){this.gl=c;this.vertexBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,
this.indices,c.STATIC_DRAW);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertices,c.DYNAMIC_DRAW);this.currentBlendMode=99999};d.WebGLSpriteBatch.prototype.begin=function(c){this.renderSession=c;this.shader=this.renderSession.shaderManager.defaultShader;this.start()};d.WebGLSpriteBatch.prototype.end=function(){this.flush()};d.WebGLSpriteBatch.prototype.render=function(c){var e=c.texture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&
(this.flush(),this.currentBaseTexture=e.baseTexture);c.blendMode!==this.currentBlendMode&&this.setBlendMode(c.blendMode);var d=c._uvs||c.texture._uvs;if(d){var f,h,l,m,n=c.worldAlpha,q=c.tint,p=this.vertices;h=c.anchor.x;m=c.anchor.y;c.texture.trim?(l=c.texture.trim,h=l.x-h*l.width,f=h+e.frame.width,m=l.y-m*l.height,l=m+e.frame.height):(f=e.frame.width*(1-h),h=e.frame.width*-h,l=e.frame.height*(1-m),m=e.frame.height*-m);var e=4*this.currentBatchSize*this.vertSize,s=c.worldTransform;c=s.a;var v=s.c,
t=s.b,w=s.d,z=s.tx,s=s.ty;p[e++]=c*h+t*m+z;p[e++]=w*m+v*h+s;p[e++]=d.x0;p[e++]=d.y0;p[e++]=n;p[e++]=q;p[e++]=c*f+t*m+z;p[e++]=w*m+v*f+s;p[e++]=d.x1;p[e++]=d.y1;p[e++]=n;p[e++]=q;p[e++]=c*f+t*l+z;p[e++]=w*l+v*f+s;p[e++]=d.x2;p[e++]=d.y2;p[e++]=n;p[e++]=q;p[e++]=c*h+t*l+z;p[e++]=w*l+v*h+s;p[e++]=d.x3;p[e++]=d.y3;p[e++]=n;p[e++]=q;this.currentBatchSize++}};d.WebGLSpriteBatch.prototype.renderTilingSprite=function(c){var e=c.tilingTexture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=
this.size)&&(this.flush(),this.currentBaseTexture=e.baseTexture);c.blendMode!==this.currentBlendMode&&this.setBlendMode(c.blendMode);c._uvs||(c._uvs=new d.TextureUvs);var k=c._uvs;c.tilePosition.x%=e.baseTexture.width*c.tileScaleOffset.x;c.tilePosition.y%=e.baseTexture.height*c.tileScaleOffset.y;var f=c.tilePosition.x/(e.baseTexture.width*c.tileScaleOffset.x),h=c.tilePosition.y/(e.baseTexture.height*c.tileScaleOffset.y),l=c.width/e.baseTexture.width/(c.tileScale.x*c.tileScaleOffset.x),e=c.height/
e.baseTexture.height/(c.tileScale.y*c.tileScaleOffset.y);k.x0=0-f;k.y0=0-h;k.x1=1*l-f;k.y1=0-h;k.x2=1*l-f;k.y2=1*e-h;k.x3=0-f;k.y3=1*e-h;var f=c.worldAlpha,h=c.tint,l=this.vertices,m=c.width,n=c.height,q=c.anchor.x,p=c.anchor.y,e=m*(1-q),m=m*-q,q=n*(1-p),n=n*-p,p=4*this.currentBatchSize*this.vertSize,s=c.worldTransform;c=s.a;var v=s.c,t=s.b,w=s.d,z=s.tx,s=s.ty;l[p++]=c*m+t*n+z;l[p++]=w*n+v*m+s;l[p++]=k.x0;l[p++]=k.y0;l[p++]=f;l[p++]=h;l[p++]=c*e+t*n+z;l[p++]=w*n+v*e+s;l[p++]=k.x1;l[p++]=k.y1;l[p++]=
f;l[p++]=h;l[p++]=c*e+t*q+z;l[p++]=w*q+v*e+s;l[p++]=k.x2;l[p++]=k.y2;l[p++]=f;l[p++]=h;l[p++]=c*m+t*q+z;l[p++]=w*q+v*m+s;l[p++]=k.x3;l[p++]=k.y3;l[p++]=f;l[p++]=h;this.currentBatchSize++};d.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var c=this.gl;if(c.bindTexture(c.TEXTURE_2D,this.currentBaseTexture._glTextures[c.id]||d.createWebGLTexture(this.currentBaseTexture,c)),this.currentBatchSize>0.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,
4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}c.drawElements(c.TRIANGLES,6*this.currentBatchSize,c.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++}};d.WebGLSpriteBatch.prototype.stop=function(){this.flush()};d.WebGLSpriteBatch.prototype.start=function(){var c=this.gl;c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;c.uniform2f(this.shader.projectionVector,
e.x,e.y);e=4*this.vertSize;c.vertexAttribPointer(this.shader.aVertexPosition,2,c.FLOAT,!1,e,0);c.vertexAttribPointer(this.shader.aTextureCoord,2,c.FLOAT,!1,e,8);c.vertexAttribPointer(this.shader.colorAttribute,2,c.FLOAT,!1,e,16);this.currentBlendMode!==d.blendModes.NORMAL&&this.setBlendMode(d.blendModes.NORMAL)};d.WebGLSpriteBatch.prototype.setBlendMode=function(c){this.flush();this.currentBlendMode=c;c=d.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(c[0],c[1])};d.WebGLSpriteBatch.prototype.destroy=
function(){this.indices=this.vertices=null;this.gl.deleteBuffer(this.vertexBuffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=this.currentBaseTexture=null};d.WebGLFastSpriteBatch=function(c){this.vertSize=10;this.size=this.maxSize=6E3;var e=6*this.maxSize;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(e);this.indexBuffer=this.vertexBuffer=null;for(var d=this.lastIndexCount=0,f=0;e>d;d+=6,f+=4)this.indices[d+0]=f+0,this.indices[d+1]=f+1,this.indices[d+2]=
f+2,this.indices[d+3]=f+0,this.indices[d+4]=f+2,this.indices[d+5]=f+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.currentBlendMode=0;this.matrix=this.shader=this.renderSession=null;this.setContext(c)};d.WebGLFastSpriteBatch.prototype.setContext=function(c){this.gl=c;this.vertexBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indices,c.STATIC_DRAW);c.bindBuffer(c.ARRAY_BUFFER,
this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertices,c.DYNAMIC_DRAW);this.currentBlendMode=99999};d.WebGLFastSpriteBatch.prototype.begin=function(c,e){this.renderSession=e;this.shader=this.renderSession.shaderManager.fastShader;this.matrix=c.worldTransform.toArray(!0);this.start()};d.WebGLFastSpriteBatch.prototype.end=function(){this.flush()};d.WebGLFastSpriteBatch.prototype.render=function(c){c=c.children;var e=c[0];if(e.texture._uvs){this.currentBaseTexture=e.texture.baseTexture;e.blendMode!==
this.currentBlendMode&&this.setBlendMode(e.blendMode);for(var e=0,d=c.length;d>e;e++)this.renderSprite(c[e]);this.flush()}};d.WebGLFastSpriteBatch.prototype.renderSprite=function(c){if(c.visible&&(c.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=c.texture.baseTexture,c.texture._uvs))){var e,d,f,h,l,m,n=this.vertices;(e=c.texture._uvs,c.texture.trim)?(h=c.texture.trim,f=h.x-c.anchor.x*h.width,d=f+c.texture.frame.width,l=h.y-c.anchor.y*h.height,h=l+c.texture.frame.height):
(d=c.texture.frame.width*(1-c.anchor.x),f=c.texture.frame.width*-c.anchor.x,h=c.texture.frame.height*(1-c.anchor.y),l=c.texture.frame.height*-c.anchor.y);m=4*this.currentBatchSize*this.vertSize;n[m++]=f;n[m++]=l;n[m++]=c.position.x;n[m++]=c.position.y;n[m++]=c.scale.x;n[m++]=c.scale.y;n[m++]=c.rotation;n[m++]=e.x0;n[m++]=e.y1;n[m++]=c.alpha;n[m++]=d;n[m++]=l;n[m++]=c.position.x;n[m++]=c.position.y;n[m++]=c.scale.x;n[m++]=c.scale.y;n[m++]=c.rotation;n[m++]=e.x1;n[m++]=e.y1;n[m++]=c.alpha;n[m++]=d;
n[m++]=h;n[m++]=c.position.x;n[m++]=c.position.y;n[m++]=c.scale.x;n[m++]=c.scale.y;n[m++]=c.rotation;n[m++]=e.x2;n[m++]=e.y2;n[m++]=c.alpha;n[m++]=f;n[m++]=h;n[m++]=c.position.x;n[m++]=c.position.y;n[m++]=c.scale.x;n[m++]=c.scale.y;n[m++]=c.rotation;n[m++]=e.x3;n[m++]=e.y3;n[m++]=c.alpha;this.currentBatchSize++;this.currentBatchSize>=this.size&&this.flush()}};d.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var c=this.gl;if(this.currentBaseTexture._glTextures[c.id]||
d.createWebGLTexture(this.currentBaseTexture,c),c.bindTexture(c.TEXTURE_2D,this.currentBaseTexture._glTextures[c.id]),this.currentBatchSize>0.5*this.size)c.bufferSubData(c.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,e)}c.drawElements(c.TRIANGLES,6*this.currentBatchSize,c.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++}};d.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()};
d.WebGLFastSpriteBatch.prototype.start=function(){var c=this.gl;c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;c.uniform2f(this.shader.projectionVector,e.x,e.y);c.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);e=4*this.vertSize;c.vertexAttribPointer(this.shader.aVertexPosition,2,c.FLOAT,!1,e,0);c.vertexAttribPointer(this.shader.aPositionCoord,2,c.FLOAT,!1,e,8);c.vertexAttribPointer(this.shader.aScale,
2,c.FLOAT,!1,e,16);c.vertexAttribPointer(this.shader.aRotation,1,c.FLOAT,!1,e,24);c.vertexAttribPointer(this.shader.aTextureCoord,2,c.FLOAT,!1,e,28);c.vertexAttribPointer(this.shader.colorAttribute,1,c.FLOAT,!1,e,36);this.currentBlendMode!==d.blendModes.NORMAL&&this.setBlendMode(d.blendModes.NORMAL)};d.WebGLFastSpriteBatch.prototype.setBlendMode=function(c){this.flush();this.currentBlendMode=c;c=d.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(c[0],c[1])};d.WebGLFilterManager=function(c,
e){this.transparent=e;this.filterStack=[];this.offsetY=this.offsetX=0;this.setContext(c)};d.WebGLFilterManager.prototype.setContext=function(c){this.gl=c;this.texturePool=[];this.initShaderBuffers()};d.WebGLFilterManager.prototype.begin=function(c,e){this.renderSession=c;this.defaultShader=c.shaderManager.defaultShader;var d=this.renderSession.projection;this.width=2*d.x;this.height=2*-d.y;this.buffer=e};d.WebGLFilterManager.prototype.pushFilter=function(c){var e=this.gl,k=this.renderSession.projection,
f=this.renderSession.offset;c._filterArea=c.target.filterArea||c.target.getBounds();this.filterStack.push(c);var h=c.filterPasses[0];this.offsetX+=c._filterArea.x;this.offsetY+=c._filterArea.y;var l=this.texturePool.pop();l?l.resize(this.width,this.height):l=new d.FilterTexture(this.gl,this.width,this.height);e.bindTexture(e.TEXTURE_2D,l.texture);var m=c._filterArea,h=h.padding;m.x-=h;m.y-=h;m.width+=2*h;m.height+=2*h;0>m.x&&(m.x=0);m.width>this.width&&(m.width=this.width);0>m.y&&(m.y=0);m.height>
this.height&&(m.height=this.height);e.bindFramebuffer(e.FRAMEBUFFER,l.frameBuffer);e.viewport(0,0,m.width,m.height);k.x=m.width/2;k.y=-m.height/2;f.x=-m.x;f.y=-m.y;e.uniform2f(this.defaultShader.projectionVector,m.width/2,-m.height/2);e.uniform2f(this.defaultShader.offsetVector,-m.x,-m.y);e.colorMask(!0,!0,!0,!0);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);c._glFilterTexture=l};d.WebGLFilterManager.prototype.popFilter=function(){var c=this.gl,e=this.filterStack.pop(),k=e._filterArea,f=e._glFilterTexture,
h=this.renderSession.projection,l=this.renderSession.offset;if(1<e.filterPasses.length){c.viewport(0,0,k.width,k.height);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=0;this.vertexArray[1]=k.height;this.vertexArray[2]=k.width;this.vertexArray[3]=k.height;this.vertexArray[4]=0;this.vertexArray[5]=0;this.vertexArray[6]=k.width;this.vertexArray[7]=0;c.bufferSubData(c.ARRAY_BUFFER,0,this.vertexArray);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=k.width/this.width;this.uvArray[5]=
k.height/this.height;this.uvArray[6]=k.width/this.width;this.uvArray[7]=k.height/this.height;c.bufferSubData(c.ARRAY_BUFFER,0,this.uvArray);var m=this.texturePool.pop();m||(m=new d.FilterTexture(this.gl,this.width,this.height));m.resize(this.width,this.height);c.bindFramebuffer(c.FRAMEBUFFER,m.frameBuffer);c.clear(c.COLOR_BUFFER_BIT);c.disable(c.BLEND);for(var n=0;n<e.filterPasses.length-1;n++){var q=e.filterPasses[n];c.bindFramebuffer(c.FRAMEBUFFER,m.frameBuffer);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,
f.texture);this.applyFilterPass(q,k,k.width,k.height);q=f;f=m;m=q}c.enable(c.BLEND);this.texturePool.push(m)}m=e.filterPasses[e.filterPasses.length-1];this.offsetX-=k.x;this.offsetY-=k.y;var n=this.width,q=this.height,p=0,s=0,v=this.buffer;0===this.filterStack.length?c.colorMask(!0,!0,!0,!0):(v=this.filterStack[this.filterStack.length-1],k=v._filterArea,n=k.width,q=k.height,p=k.x,s=k.y,v=v._glFilterTexture.frameBuffer);h.x=n/2;h.y=-q/2;l.x=p;l.y=s;k=e._filterArea;h=k.x-p;l=k.y-s;c.bindBuffer(c.ARRAY_BUFFER,
this.vertexBuffer);this.vertexArray[0]=h;this.vertexArray[1]=l+k.height;this.vertexArray[2]=h+k.width;this.vertexArray[3]=l+k.height;this.vertexArray[4]=h;this.vertexArray[5]=l;this.vertexArray[6]=h+k.width;this.vertexArray[7]=l;c.bufferSubData(c.ARRAY_BUFFER,0,this.vertexArray);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=k.width/this.width;this.uvArray[5]=k.height/this.height;this.uvArray[6]=k.width/this.width;this.uvArray[7]=k.height/this.height;c.bufferSubData(c.ARRAY_BUFFER,0,this.uvArray);
c.viewport(0,0,n,q);c.bindFramebuffer(c.FRAMEBUFFER,v);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,f.texture);this.applyFilterPass(m,k,n,q);c.useProgram(this.defaultShader.program);c.uniform2f(this.defaultShader.projectionVector,n/2,-q/2);c.uniform2f(this.defaultShader.offsetVector,-p,-s);this.texturePool.push(f);e._glFilterTexture=null};d.WebGLFilterManager.prototype.applyFilterPass=function(c,e,k,f){e=this.gl;var h=c.shaders[e.id];h||(h=new d.PixiShader(e),h.fragmentSrc=c.fragmentSrc,
h.uniforms=c.uniforms,h.init(),c.shaders[e.id]=h);e.useProgram(h.program);e.uniform2f(h.projectionVector,k/2,-f/2);e.uniform2f(h.offsetVector,0,0);c.uniforms.dimensions&&(c.uniforms.dimensions.value[0]=this.width,c.uniforms.dimensions.value[1]=this.height,c.uniforms.dimensions.value[2]=this.vertexArray[0],c.uniforms.dimensions.value[3]=this.vertexArray[5]);h.syncUniforms();e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.vertexAttribPointer(h.aVertexPosition,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,
this.uvBuffer);e.vertexAttribPointer(h.aTextureCoord,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer);e.vertexAttribPointer(h.colorAttribute,2,e.FLOAT,!1,0,0);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);this.renderSession.drawCount++};d.WebGLFilterManager.prototype.initShaderBuffers=function(){var c=this.gl;this.vertexBuffer=c.createBuffer();this.uvBuffer=c.createBuffer();this.colorBuffer=c.createBuffer();this.indexBuffer=c.createBuffer();
this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,this.vertexArray,c.STATIC_DRAW);this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]);c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer);c.bufferData(c.ARRAY_BUFFER,this.uvArray,c.STATIC_DRAW);this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]);c.bindBuffer(c.ARRAY_BUFFER,this.colorBuffer);c.bufferData(c.ARRAY_BUFFER,this.colorArray,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),c.STATIC_DRAW)};d.WebGLFilterManager.prototype.destroy=function(){var c=this.gl;this.filterStack=null;for(var e=this.offsetY=this.offsetX=0;e<this.texturePool.length;e++)this.texturePool.destroy();this.texturePool=null;c.deleteBuffer(this.vertexBuffer);c.deleteBuffer(this.uvBuffer);c.deleteBuffer(this.colorBuffer);c.deleteBuffer(this.indexBuffer)};d.FilterTexture=function(c,e,k,f){this.gl=c;this.frameBuffer=c.createFramebuffer();
this.texture=c.createTexture();f=f||d.scaleModes.DEFAULT;c.bindTexture(c.TEXTURE_2D,this.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f===d.scaleModes.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,f===d.scaleModes.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer);c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer);
c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0);this.renderBuffer=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,this.renderBuffer);this.resize(e,k)};d.FilterTexture.prototype.clear=function(){var c=this.gl;c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT)};d.FilterTexture.prototype.resize=function(c,e){if(this.width!==c||this.height!==e){this.width=
c;this.height=e;var d=this.gl;d.bindTexture(d.TEXTURE_2D,this.texture);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,c,e,0,d.RGBA,d.UNSIGNED_BYTE,null);d.bindRenderbuffer(d.RENDERBUFFER,this.renderBuffer);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,c,e)}};d.FilterTexture.prototype.destroy=function(){var c=this.gl;c.deleteFramebuffer(this.frameBuffer);c.deleteTexture(this.texture);this.texture=this.frameBuffer=null};d.CanvasMaskManager=function(){};d.CanvasMaskManager.prototype.pushMask=function(c,e){e.save();
var k=c.alpha,f=c.worldTransform;e.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty);d.CanvasGraphics.renderGraphicsMask(c,e);e.clip();c.worldAlpha=k};d.CanvasMaskManager.prototype.popMask=function(c){c.restore()};d.CanvasTinter=function(){};d.CanvasTinter.getTintedTexture=function(c,e){var k=c.texture;e=d.CanvasTinter.roundColor(e);var f="#"+("00000"+(0|e).toString(16)).substr(-6);if(k.tintCache=k.tintCache||{},k.tintCache[f])return k.tintCache[f];var h=d.CanvasTinter.canvas||document.createElement("canvas");
if(d.CanvasTinter.tintMethod(k,e,h),d.CanvasTinter.convertTintToImage){var l=new Image;l.src=h.toDataURL();k.tintCache[f]=l}else k.tintCache[f]=h,d.CanvasTinter.canvas=null;return h};d.CanvasTinter.tintWithMultiply=function(c,e,d){var f=d.getContext("2d"),h=c.frame;d.width=h.width;d.height=h.height;f.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6);f.fillRect(0,0,h.width,h.height);f.globalCompositeOperation="multiply";f.drawImage(c.baseTexture.source,h.x,h.y,h.width,h.height,0,0,h.width,h.height);
f.globalCompositeOperation="destination-atop";f.drawImage(c.baseTexture.source,h.x,h.y,h.width,h.height,0,0,h.width,h.height)};d.CanvasTinter.tintWithOverlay=function(c,e,d){var f=d.getContext("2d"),h=c.frame;d.width=h.width;d.height=h.height;f.globalCompositeOperation="copy";f.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6);f.fillRect(0,0,h.width,h.height);f.globalCompositeOperation="destination-atop";f.drawImage(c.baseTexture.source,h.x,h.y,h.width,h.height,0,0,h.width,h.height)};d.CanvasTinter.tintWithPerPixel=
function(c,e,k){var f=k.getContext("2d"),h=c.frame;k.width=h.width;k.height=h.height;f.globalCompositeOperation="copy";f.drawImage(c.baseTexture.source,h.x,h.y,h.width,h.height,0,0,h.width,h.height);k=d.hex2rgb(e);c=k[0];e=k[1];k=k[2];for(var h=f.getImageData(0,0,h.width,h.height),l=h.data,m=0;m<l.length;m+=4)l[m+0]*=c,l[m+1]*=e,l[m+2]*=k;f.putImageData(h,0,0)};d.CanvasTinter.roundColor=function(c){var e=d.CanvasTinter.cacheStepsPerColorChannel;c=d.hex2rgb(c);return c[0]=Math.min(255,c[0]/e*e),c[1]=
Math.min(255,c[1]/e*e),c[2]=Math.min(255,c[2]/e*e),d.rgb2hex(c)};d.CanvasTinter.cacheStepsPerColorChannel=8;d.CanvasTinter.convertTintToImage=!1;d.CanvasTinter.canUseMultiply=d.canUseNewCanvasBlendModes();d.CanvasTinter.tintMethod=d.CanvasTinter.canUseMultiply?d.CanvasTinter.tintWithMultiply:d.CanvasTinter.tintWithPerPixel;d.CanvasRenderer=function(c,e,k,f){d.defaultRenderer=d.defaultRenderer||this;this.type=d.CANVAS_RENDERER;this.clearBeforeRender=!0;this.roundPixels=!1;this.transparent=!!f;d.blendModesCanvas||
(d.blendModesCanvas=[],d.canUseNewCanvasBlendModes()?(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]="lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]="multiply",d.blendModesCanvas[d.blendModes.SCREEN]="screen",d.blendModesCanvas[d.blendModes.OVERLAY]="overlay",d.blendModesCanvas[d.blendModes.DARKEN]="darken",d.blendModesCanvas[d.blendModes.LIGHTEN]="lighten",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="color-dodge",d.blendModesCanvas[d.blendModes.COLOR_BURN]=
"color-burn",d.blendModesCanvas[d.blendModes.HARD_LIGHT]="hard-light",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]="soft-light",d.blendModesCanvas[d.blendModes.DIFFERENCE]="difference",d.blendModesCanvas[d.blendModes.EXCLUSION]="exclusion",d.blendModesCanvas[d.blendModes.HUE]="hue",d.blendModesCanvas[d.blendModes.SATURATION]="saturation",d.blendModesCanvas[d.blendModes.COLOR]="color",d.blendModesCanvas[d.blendModes.LUMINOSITY]="luminosity"):(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]=
"lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]="source-over",d.blendModesCanvas[d.blendModes.SCREEN]="source-over",d.blendModesCanvas[d.blendModes.OVERLAY]="source-over",d.blendModesCanvas[d.blendModes.DARKEN]="source-over",d.blendModesCanvas[d.blendModes.LIGHTEN]="source-over",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="source-over",d.blendModesCanvas[d.blendModes.COLOR_BURN]="source-over",d.blendModesCanvas[d.blendModes.HARD_LIGHT]="source-over",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]=
"source-over",d.blendModesCanvas[d.blendModes.DIFFERENCE]="source-over",d.blendModesCanvas[d.blendModes.EXCLUSION]="source-over",d.blendModesCanvas[d.blendModes.HUE]="source-over",d.blendModesCanvas[d.blendModes.SATURATION]="source-over",d.blendModesCanvas[d.blendModes.COLOR]="source-over",d.blendModesCanvas[d.blendModes.LUMINOSITY]="source-over"));this.width=c||800;this.height=e||600;this.view=k||document.createElement("canvas");this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=
!0;this.view.width=this.width;this.view.height=this.height;this.count=0;this.maskManager=new d.CanvasMaskManager;this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null};"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty=
"mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")};d.CanvasRenderer.prototype.constructor=d.CanvasRenderer;d.CanvasRenderer.prototype.render=function(c){d.texturesToUpdate.length=0;d.texturesToDestroy.length=0;c.updateTransform();this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=c.backgroundColorString,this.context.fillRect(0,0,this.width,
this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height);this.renderDisplayObject(c);c.interactive&&(c._interactiveEventsAdded||(c._interactiveEventsAdded=!0,c.interactionManager.setTarget(this)));0<d.Texture.frameUpdates.length&&(d.Texture.frameUpdates.length=0)};d.CanvasRenderer.prototype.resize=function(c,e){this.width=c;this.height=e;this.view.width=c;this.view.height=e};d.CanvasRenderer.prototype.renderDisplayObject=function(c,e){this.renderSession.context=
e||this.context;c._renderCanvas(this.renderSession)};d.CanvasRenderer.prototype.renderStripFlat=function(c){var e=this.context;c=c.verticies;var d=c.length/2;this.count++;e.beginPath();for(var f=1;d-2>f;f++){var h=2*f,l=c[h+2],m=c[h+4],n=c[h+3],q=c[h+5];e.moveTo(c[h],c[h+1]);e.lineTo(l,n);e.lineTo(m,q)}e.fillStyle="#FF0000";e.fill();e.closePath()};d.CanvasRenderer.prototype.renderStrip=function(c){var e=this.context,d=c.verticies,f=c.uvs,h=d.length/2;this.count++;for(var l=1;h-2>l;l++){var m=2*l,
n=d[m],q=d[m+2],p=d[m+4],s=d[m+1],v=d[m+3],t=d[m+5],w=f[m]*c.texture.width,z=f[m+2]*c.texture.width,y=f[m+4]*c.texture.width,x=f[m+1]*c.texture.height,A=f[m+3]*c.texture.height,m=f[m+5]*c.texture.height;e.save();e.beginPath();e.moveTo(n,s);e.lineTo(q,v);e.lineTo(p,t);e.closePath();e.clip();var B=w*A+x*y+z*m-A*y-x*z-w*m;e.transform((n*A+x*p+q*m-A*p-x*q-n*m)/B,(s*A+x*t+v*m-A*t-x*v-s*m)/B,(w*q+n*y+z*p-q*y-n*z-w*p)/B,(w*v+s*y+z*t-v*y-s*z-w*t)/B,(w*A*p+x*q*y+n*z*m-n*A*y-x*z*p-w*q*m)/B,(w*A*t+x*v*y+s*z*
m-s*A*y-x*z*t-w*v*m)/B);e.drawImage(c.texture.baseTexture.source,0,0);e.restore()}};d.CanvasBuffer=function(c,e){this.width=c;this.height=e;this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=c;this.canvas.height=e};d.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};d.CanvasBuffer.prototype.resize=function(c,e){this.width=this.canvas.width=c;this.height=this.canvas.height=e};d.CanvasGraphics=function(){};
d.CanvasGraphics.renderGraphics=function(c,e){for(var k=c.worldAlpha,f=0;f<c.graphicsData.length;f++){var h=c.graphicsData[f],l=h.points;if(e.strokeStyle="#"+("00000"+(0|h.lineColor).toString(16)).substr(-6),e.lineWidth=h.lineWidth,h.type===d.Graphics.POLY){e.beginPath();e.moveTo(l[0],l[1]);for(var m=1;m<l.length/2;m++)e.lineTo(l[2*m],l[2*m+1]);l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath();h.fill&&(e.globalAlpha=h.fillAlpha*k,e.fillStyle="#"+("00000"+(0|h.fillColor).toString(16)).substr(-6),
e.fill());h.lineWidth&&(e.globalAlpha=h.lineAlpha*k,e.stroke())}else if(h.type===d.Graphics.RECT)(h.fillColor||0===h.fillColor)&&(e.globalAlpha=h.fillAlpha*k,e.fillStyle="#"+("00000"+(0|h.fillColor).toString(16)).substr(-6),e.fillRect(l[0],l[1],l[2],l[3])),h.lineWidth&&(e.globalAlpha=h.lineAlpha*k,e.strokeRect(l[0],l[1],l[2],l[3]));else if(h.type===d.Graphics.CIRC)e.beginPath(),e.arc(l[0],l[1],l[2],0,2*Math.PI),e.closePath(),h.fill&&(e.globalAlpha=h.fillAlpha*k,e.fillStyle="#"+("00000"+(0|h.fillColor).toString(16)).substr(-6),
e.fill()),h.lineWidth&&(e.globalAlpha=h.lineAlpha*k,e.stroke());else if(h.type===d.Graphics.ELIP){var n=h.points,q=2*n[2],m=2*n[3],l=n[0]-q/2,n=n[1]-m/2;e.beginPath();var p=q/2*0.5522848,s=m/2*0.5522848,v=l+q,t=n+m,q=l+q/2,m=n+m/2;e.moveTo(l,m);e.bezierCurveTo(l,m-s,q-p,n,q,n);e.bezierCurveTo(q+p,n,v,m-s,v,m);e.bezierCurveTo(v,m+s,q+p,t,q,t);e.bezierCurveTo(q-p,t,l,m+s,l,m);e.closePath();h.fill&&(e.globalAlpha=h.fillAlpha*k,e.fillStyle="#"+("00000"+(0|h.fillColor).toString(16)).substr(-6),e.fill());
h.lineWidth&&(e.globalAlpha=h.lineAlpha*k,e.stroke())}}};d.CanvasGraphics.renderGraphicsMask=function(c,e){var k=c.graphicsData.length;if(0!==k)for(1<k&&window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"),k=0;1>k;k++){var f=c.graphicsData[k],h=f.points;if(f.type===d.Graphics.POLY){e.beginPath();e.moveTo(h[0],h[1]);for(f=1;f<h.length/2;f++)e.lineTo(h[2*f],h[2*f+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath()}else if(f.type===
d.Graphics.RECT)e.beginPath(),e.rect(h[0],h[1],h[2],h[3]),e.closePath();else if(f.type===d.Graphics.CIRC)e.beginPath(),e.arc(h[0],h[1],h[2],0,2*Math.PI),e.closePath();else if(f.type===d.Graphics.ELIP){var l=f.points,m=2*l[2],f=2*l[3],h=l[0]-m/2,l=l[1]-f/2;e.beginPath();var n=m/2*0.5522848,q=f/2*0.5522848,p=h+m,s=l+f,m=h+m/2,f=l+f/2;e.moveTo(h,f);e.bezierCurveTo(h,f-q,m-n,l,m,l);e.bezierCurveTo(m+n,l,p,f-q,p,f);e.bezierCurveTo(p,f+q,m+n,s,m,s);e.bezierCurveTo(m-n,s,h,f+q,h,f);e.closePath()}}};d.Graphics=
function(){d.DisplayObjectContainer.call(this);this.renderable=!0;this.fillAlpha=1;this.lineWidth=0;this.lineColor="black";this.graphicsData=[];this.tint=16777215;this.blendMode=d.blendModes.NORMAL;this.currentPath={points:[]};this._webGL=[];this.isMask=!1;this.bounds=null;this.boundsPadding=10};d.Graphics.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Graphics.prototype.constructor=d.Graphics;Object.defineProperty(d.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},
set:function(c){(this._cacheAsBitmap=c)?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}});d.Graphics.prototype.lineStyle=function(c,e,k){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=c||0,this.lineColor=e||0,this.lineAlpha=3>arguments.length?1:k,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.Graphics.POLY},this.graphicsData.push(this.currentPath),
this};d.Graphics.prototype.moveTo=function(c,e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.Graphics.POLY},this.currentPath.points.push(c,e),this.graphicsData.push(this.currentPath),this};d.Graphics.prototype.lineTo=function(c,e){return this.currentPath.points.push(c,e),this.dirty=!0,this};
d.Graphics.prototype.beginFill=function(c,e){return this.filling=!0,this.fillColor=c||0,this.fillAlpha=2>arguments.length?1:e,this};d.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this};d.Graphics.prototype.drawRect=function(c,e,k,f){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,
points:[c,e,k,f],type:d.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this};d.Graphics.prototype.drawCircle=function(c,e,k){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[c,e,k,k],type:d.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this};d.Graphics.prototype.drawEllipse=
function(c,e,k,f){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[c,e,k,f],type:d.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this};d.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this};d.Graphics.prototype.generateTexture=
function(){var c=this.getBounds(),e=new d.CanvasBuffer(c.width,c.height),k=d.Texture.fromCanvas(e.canvas);return e.context.translate(-c.x,-c.y),d.CanvasGraphics.renderGraphics(this,e.context),k};d.Graphics.prototype._renderWebGL=function(c){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),d.updateWebGLTexture(this._cachedSprite.texture.baseTexture,c.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,d.Sprite.prototype._renderWebGL.call(this._cachedSprite,
c),void 0;if(c.spriteBatch.stop(),this._mask&&c.maskManager.pushMask(this.mask,c),this._filters&&c.filterManager.pushFilter(this._filterBlock),this.blendMode!==c.spriteBatch.currentBlendMode){c.spriteBatch.currentBlendMode=this.blendMode;var e=d.blendModesWebGL[c.spriteBatch.currentBlendMode];c.spriteBatch.gl.blendFunc(e[0],e[1])}if(d.WebGLGraphics.renderGraphics(this,c),this.children.length){c.spriteBatch.start();for(var e=0,k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop()}this._filters&&
c.filterManager.popFilter();this._mask&&c.maskManager.popMask(c);c.drawCount++;c.spriteBatch.start()}};d.Graphics.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){var e=c.context,k=this.worldTransform;this.blendMode!==c.currentBlendMode&&(c.currentBlendMode=this.blendMode,e.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]);e.setTransform(k.a,k.c,k.b,k.d,k.tx,k.ty);d.CanvasGraphics.renderGraphics(this,e);e=0;for(k=this.children.length;k>e;e++)this.children[e]._renderCanvas(c)}};
d.Graphics.prototype.getBounds=function(c){this.bounds||this.updateBounds();var e=this.bounds.x,d=this.bounds.width+this.bounds.x,f=this.bounds.y,h=this.bounds.height+this.bounds.y;c=c||this.worldTransform;var l=c.a,m=c.c,n=c.b,q=c.d,p=c.tx,s=c.ty,v=l*d+n*h+p,t=q*h+m*d+s;c=l*e+n*h+p;var h=q*h+m*e+s,w=l*e+n*f+p,e=q*f+m*e+s,l=l*d+n*f+p,d=q*f+m*d+s,f=v,m=t,v=v>c?c:v,v=v>w?w:v,v=v>l?l:v,t=t>h?h:t,t=t>e?e:t,t=t>d?d:t,f=c>f?c:f,f=w>f?w:f,m=h>m?h:m,m=e>m?e:m;c=this._bounds;return c.x=v,c.width=(l>f?l:f)-
v,c.y=t,c.height=(d>m?d:m)-t,c};d.Graphics.prototype.updateBounds=function(){for(var c,e,k,f,h,l=1/0,m=-1/0,n=1/0,q=-1/0,p=0;p<this.graphicsData.length;p++)if(c=this.graphicsData[p],e=c.type,h=c.lineWidth,c=c.points,e===d.Graphics.RECT)e=c[0]-h/2,k=c[1]-h/2,f=c[2]+h,h=c[3]+h,l=l>e?e:l,m=e+f>m?e+f:m,n=n>k?e:n,q=k+h>q?k+h:q;else if(e===d.Graphics.CIRC||e===d.Graphics.ELIP)e=c[0],k=c[1],f=c[2]+h/2,h=c[3]+h/2,l=l>e-f?e-f:l,m=e+f>m?e+f:m,n=n>k-h?k-h:n,q=k+h>q?k+h:q;else for(f=0;f<c.length;f+=2)e=c[f],
k=c[f+1],l=l>e-h?e-h:l,m=e+h>m?e+h:m,n=n>k-h?k-h:n,q=k+h>q?k+h:q;p=this.boundsPadding;this.bounds=new d.Rectangle(l-p,n-p,m-l+2*p,q-n+2*p)};d.Graphics.prototype._generateCachedSprite=function(){var c=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(c.width,c.height);else{var e=new d.CanvasBuffer(c.width,c.height),k=d.Texture.fromCanvas(e.canvas);this._cachedSprite=new d.Sprite(k);this._cachedSprite.buffer=e;this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=
-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._cachedSprite.buffer.context.translate(-c.x,-c.y);d.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context);this._cachedSprite.alpha=this.alpha};d.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0);this._cachedSprite=null};d.Graphics.POLY=0;d.Graphics.RECT=1;d.Graphics.CIRC=2;d.Graphics.ELIP=3;d.Strip=function(c,e,k){d.Sprite.call(this,c);this.width=e;this.height=k;this.texture=c;this.blendMode=
d.blendModes.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(f){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}c.baseTexture.hasLoaded?(this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0):(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",
this.onTextureUpdateBind));this.renderable=!0};d.Strip.prototype=Object.create(d.Sprite.prototype);d.Strip.prototype.constructor=d.Strip;d.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0};d.Rope=function(c,e){d.Strip.call(this,c);this.points=e;try{this.verticies=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length)}catch(k){this.verticies=Array(4*e.length),this.uvs=Array(4*e.length),this.colors=
Array(2*e.length),this.indices=Array(2*e.length)}this.refresh()};d.Rope.prototype=Object.create(d.Strip.prototype);d.Rope.prototype.constructor=d.Rope;d.Rope.prototype.refresh=function(){var c=this.points;if(!(1>c.length)){var e=this.uvs,d=this.indices,f=this.colors;this.count-=0.2;e[0]=0;e[1]=1;e[2]=0;e[3]=1;f[0]=1;f[1]=1;d[0]=0;d[1]=1;for(var h,l=c.length,m=1;l>m;m++)c=4*m,h=m/(l-1),e[c]=h,e[c+1]=0,e[c+2]=h,e[c+3]=1,c=2*m,f[c]=1,f[c+1]=1,c=2*m,d[c]=c,d[c+1]=c+1}};d.Rope.prototype.updateTransform=
function(){var c=this.points;if(!(1>c.length)){var e,k=c[0],f=e=0;this.count-=0.2;var h=this.verticies;h[0]=k.x+e;h[1]=k.y+f;h[2]=k.x-e;h[3]=k.y-f;for(var l,m,n,q=c.length,p=1;q>p;p++)l=c[p],m=4*p,e=p<c.length-1?c[p+1]:l,f=-(e.x-k.x),e=e.y-k.y,k=Math.sqrt(e*e+f*f),n=this.texture.height/2,e/=k,f/=k,e*=n,f*=n,h[m]=l.x+e,h[m+1]=l.y+f,h[m+2]=l.x-e,h[m+3]=l.y-f,k=l;d.DisplayObjectContainer.prototype.updateTransform.call(this)}};d.Rope.prototype.setTexture=function(c){this.texture=c;this.updateFrame=!0};
d.TilingSprite=function(c,e,k){d.Sprite.call(this,c);this.width=e||100;this.height=k||100;this.tileScale=new d.Point(1,1);this.tileScaleOffset=new d.Point(1,1);this.tilePosition=new d.Point(0,0);this.renderable=!0;this.tint=16777215;this.blendMode=d.blendModes.NORMAL};d.TilingSprite.prototype=Object.create(d.Sprite.prototype);d.TilingSprite.prototype.constructor=d.TilingSprite;Object.defineProperty(d.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(c){this._width=c}});
Object.defineProperty(d.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(c){this._height=c}});d.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0};d.TilingSprite.prototype.setTexture=function(c){this.texture!==c&&(this.texture=c,this.refreshTexture=!0,this.cachedTint=16777215)};d.TilingSprite.prototype._renderWebGL=function(c){if(!1!==this.visible&&0!==this.alpha){var e,k;this.mask&&(c.spriteBatch.stop(),c.maskManager.pushMask(this.mask,c),c.spriteBatch.start());
this.filters&&(c.spriteBatch.flush(),c.filterManager.pushFilter(this._filterBlock));!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(d.updateWebGLTexture(this.tilingTexture.baseTexture,c.gl),this.tilingTexture.needsUpdate=!1)):c.spriteBatch.renderTilingSprite(this);e=0;for(k=this.children.length;k>e;e++)this.children[e]._renderWebGL(c);c.spriteBatch.stop();this.filters&&c.filterManager.popFilter();this.mask&&c.maskManager.popMask(c);
c.spriteBatch.start()}};d.TilingSprite.prototype._renderCanvas=function(c){if(!1!==this.visible&&0!==this.alpha){var e=c.context;this._mask&&c.maskManager.pushMask(this._mask,e);e.globalAlpha=this.worldAlpha;var k=this.worldTransform;if(e.setTransform(k.a,k.c,k.b,k.d,k.tx,k.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==c.currentBlendMode&&
(c.currentBlendMode=this.blendMode,e.globalCompositeOperation=d.blendModesCanvas[c.currentBlendMode]);e.beginPath();var k=this.tilePosition,f=this.tileScale;k.x%=this.tilingTexture.baseTexture.width;k.y%=this.tilingTexture.baseTexture.height;e.scale(f.x,f.y);e.translate(k.x,k.y);e.fillStyle=this.__tilePattern;e.fillRect(-k.x+this.anchor.x*-this._width,-k.y+this.anchor.y*-this._height,this._width/f.x,this._height/f.y);e.scale(1/f.x,1/f.y);e.translate(-k.x,-k.y);e.closePath();this._mask&&c.maskManager.popMask(c.context)}};
d.TilingSprite.prototype.getBounds=function(){var c=this._width,e=this._height,d=c*(1-this.anchor.x),f=c*-this.anchor.x,h=e*(1-this.anchor.y),l=e*-this.anchor.y,e=this.worldTransform,m=e.a,n=e.c,q=e.b,p=e.d,s=e.tx,v=e.ty,e=m*f+q*l+s,c=p*l+n*f+v,t=m*d+q*l+s,l=p*l+n*d+v,w=m*d+q*h+s,d=p*h+n*d+v,m=m*f+q*h+s,f=p*h+n*f+v,h=-1/0,n=-1/0,p=1/0,q=1/0,p=p>e?e:p,p=p>t?t:p,p=p>w?w:p,p=p>m?m:p,q=q>c?c:q,q=q>l?l:q,q=q>d?d:q,q=q>f?f:q,h=e>h?e:h,h=t>h?t:h,h=w>h?w:h,n=c>n?c:n,n=l>n?l:n,n=d>n?d:n,e=this._bounds;return e.x=
p,e.width=(m>h?m:h)-p,e.y=q,e.height=(f>n?f:n)-q,this._currentBounds=e,e};d.TilingSprite.prototype.generateTilingTexture=function(c){var e=this.texture;if(e.baseTexture.hasLoaded){var k,f,h=e.baseTexture,l=e.frame,h=l.width!==h.width||l.height!==h.height,m=!1;if(c?(k=d.getNextPowerOfTwo(l.width),f=d.getNextPowerOfTwo(l.height),l.width!==k&&l.height!==f&&(m=!0)):h&&(k=l.width,f=l.height,m=!0),m){var n;this.tilingTexture&&this.tilingTexture.isTiling?(n=this.tilingTexture.canvasBuffer,n.resize(k,f),
this.tilingTexture.baseTexture.width=k,this.tilingTexture.baseTexture.height=f,this.tilingTexture.needsUpdate=!0):(n=new d.CanvasBuffer(k,f),this.tilingTexture=d.Texture.fromCanvas(n.canvas),this.tilingTexture.canvasBuffer=n,this.tilingTexture.isTiling=!0);n.context.drawImage(e.baseTexture.source,l.x,l.y,l.width,l.height,0,0,k,f);this.tileScaleOffset.x=l.width/k;this.tileScaleOffset.y=l.height/f}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=
1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1;this.tilingTexture.baseTexture._powerOf2=!0}};var s={BoneData:function(c,e){this.name=c;this.parent=e}};s.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1};s.SlotData=function(c,e){this.name=c;this.boneData=e};s.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null};s.Bone=function(c,e){this.data=c;this.parent=e;this.setToSetupPose()};s.Bone.yDown=!1;s.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,
m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(c,e){var d=this.parent;null!=d?(this.worldX=this.x*d.m00+this.y*d.m01+d.worldX,this.worldY=this.x*d.m10+this.y*d.m11+d.worldY,this.worldScaleX=d.worldScaleX*this.scaleX,this.worldScaleY=d.worldScaleY*this.scaleY,this.worldRotation=d.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);
var f=this.worldRotation*Math.PI/180,d=Math.cos(f),f=Math.sin(f);this.m00=d*this.worldScaleX;this.m10=f*this.worldScaleX;this.m01=-f*this.worldScaleY;this.m11=d*this.worldScaleY;c&&(this.m00=-this.m00,this.m01=-this.m01);e&&(this.m10=-this.m10,this.m11=-this.m11);s.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var c=this.data;this.x=c.x;this.y=c.y;this.rotation=c.rotation;this.scaleX=c.scaleX;this.scaleY=c.scaleY}};s.Slot=function(c,e,d){this.data=c;this.skeleton=
e;this.bone=d;this.setToSetupPose()};s.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(c){this.attachment=c;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(c){this._attachmentTime=this.skeleton.time-c},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var c=this.data;this.r=c.r;this.g=c.g;this.b=c.b;this.a=c.a;for(var e=this.skeleton.data.slots,d=0,f=e.length;f>d;d++)if(e[d]==c){this.setAttachment(c.attachmentName?
this.skeleton.getAttachmentBySlotIndex(d,c.attachmentName):null);break}}};s.Skin=function(c){this.name=c;this.attachments={}};s.Skin.prototype={addAttachment:function(c,e,d){this.attachments[c+":"+e]=d},getAttachment:function(c,e){return this.attachments[c+":"+e]},_attachAll:function(c,e){for(var d in e.attachments){var f=d.indexOf(":"),h=parseInt(d.substring(0,f),10),l=d.substring(f+1),f=c.slots[h];f.attachment&&f.attachment.name==l&&(h=this.getAttachment(h,l))&&f.setAttachment(h)}}};s.Animation=
function(c,e,d){this.name=c;this.timelines=e;this.duration=d};s.Animation.prototype={apply:function(c,e,d){d&&this.duration&&(e%=this.duration);d=this.timelines;for(var f=0,h=d.length;h>f;f++)d[f].apply(c,e,1)},mix:function(c,e,d,f){d&&this.duration&&(e%=this.duration);d=this.timelines;for(var h=0,l=d.length;l>h;h++)d[h].apply(c,e,f)}};s.binarySearch=function(c,e,d){var f=0,h=Math.floor(c.length/d)-2;if(!h)return d;for(var l=h>>>1;;){if(c[(l+1)*d]<=e?f=l+1:h=l,f==h)return(f+1)*d;l=f+h>>>1}};s.linearSearch=
function(c,e,d){for(var f=0,h=c.length-d;h>=f;f+=d)if(c[f]>e)return f;return-1};s.Curves=function(c){this.curves=[];this.curves.length=6*(c-1)};s.Curves.prototype={setLinear:function(c){this.curves[6*c]=0},setStepped:function(c){this.curves[6*c]=-1},setCurve:function(c,e,d,f,h){var l=0.1*0.1,m=0.1*l,n=3*0.1,q=3*l,l=6*l,p=6*m,s=2*-e+f,v=2*-d+h;f=3*(e-f)+1;h=3*(d-h)+1;c*=6;var t=this.curves;t[c]=e*n+s*q+f*m;t[c+1]=d*n+v*q+h*m;t[c+2]=s*l+f*p;t[c+3]=v*l+h*p;t[c+4]=f*p;t[c+5]=h*p},getCurvePercent:function(c,
e){e=0>e?0:1<e?1:e;var d=6*c,f=this.curves,h=f[d];if(!h)return e;if(-1==h)return 0;for(var l=f[d+1],m=f[d+2],n=f[d+3],q=f[d+4],p=f[d+5],d=h,f=l,s=8;;){if(d>=e)return h=d-h,l=f-l,l+(f-l)*(e-h)/(d-h);if(!s)break;s--;h+=m;l+=n;m+=q;n+=p;d+=h;f+=l}return f+(1-f)*(e-d)/(1-d)}};s.RotateTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=2*c};s.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(c,e,d){c*=2;this.frames[c]=
e;this.frames[c+1]=d},apply:function(c,e,d){var f;f=this.frames;if(!(e<f[0])){c=c.bones[this.boneIndex];if(e>=f[f.length-2]){for(f=c.data.rotation+f[f.length-1]-c.rotation;180<f;)f-=360;for(;-180>f;)f+=360;return c.rotation+=f*d,void 0}var h=s.binarySearch(f,e,2),l=f[h-1],m=f[h];e=1-(e-m)/(f[h-2]-m);e=this.curves.getCurvePercent(h/2-1,e);for(f=f[h+1]-l;180<f;)f-=360;for(;-180>f;)f+=360;for(f=c.data.rotation+(l+f*e)-c.rotation;180<f;)f-=360;for(;-180>f;)f+=360;c.rotation+=f*d}}};s.TranslateTimeline=
function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=3*c};s.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(c,e,d,f){c*=3;this.frames[c]=e;this.frames[c+1]=d;this.frames[c+2]=f},apply:function(c,e,d){var f=this.frames;if(!(e<f[0])){c=c.bones[this.boneIndex];if(e>=f[f.length-3])return c.x+=(c.data.x+f[f.length-2]-c.x)*d,c.y+=(c.data.y+f[f.length-1]-c.y)*d,void 0;var h=s.binarySearch(f,e,3),l=f[h-2],m=f[h-1],n=f[h];
e=1-(e-n)/(f[h+-3]-n);e=this.curves.getCurvePercent(h/3-1,e);c.x+=(c.data.x+l+(f[h+1]-l)*e-c.x)*d;c.y+=(c.data.y+m+(f[h+2]-m)*e-c.y)*d}}};s.ScaleTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=3*c};s.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(c,e,d,f){c*=3;this.frames[c]=e;this.frames[c+1]=d;this.frames[c+2]=f},apply:function(c,e,d){var f=this.frames;if(!(e<f[0])){c=c.bones[this.boneIndex];if(e>=f[f.length-
3])return c.scaleX+=(c.data.scaleX-1+f[f.length-2]-c.scaleX)*d,c.scaleY+=(c.data.scaleY-1+f[f.length-1]-c.scaleY)*d,void 0;var h=s.binarySearch(f,e,3),l=f[h-2],m=f[h-1],n=f[h];e=1-(e-n)/(f[h+-3]-n);e=this.curves.getCurvePercent(h/3-1,e);c.scaleX+=(c.data.scaleX-1+l+(f[h+1]-l)*e-c.scaleX)*d;c.scaleY+=(c.data.scaleY-1+m+(f[h+2]-m)*e-c.scaleY)*d}}};s.ColorTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=5*c};s.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/
2},setFrame:function(c,e){c*=5;this.frames[c]=e;this.frames[c+1]=r;this.frames[c+2]=g;this.frames[c+3]=b;this.frames[c+4]=a},apply:function(c,e,d){var f=this.frames;if(!(e<f[0])){c=c.slots[this.slotIndex];if(e>=f[f.length-5])return d=f.length-1,c.r=f[d-3],c.g=f[d-2],c.b=f[d-1],c.a=f[d],void 0;var h=s.binarySearch(f,e,5),l=f[h-4],m=f[h-3],n=f[h-2],q=f[h-1],p=f[h];e=1-(e-p)/(f[h-5]-p);e=this.curves.getCurvePercent(h/5-1,e);l+=(f[h+1]-l)*e;m+=(f[h+2]-m)*e;n+=(f[h+3]-n)*e;f=q+(f[h+4]-q)*e;1>d?(c.r+=(l-
c.r)*d,c.g+=(m-c.g)*d,c.b+=(n-c.b)*d,c.a+=(f-c.a)*d):(c.r=l,c.g=m,c.b=n,c.a=f)}}};s.AttachmentTimeline=function(c){this.curves=new s.Curves(c);this.frames=[];this.frames.length=c;this.attachmentNames=[];this.attachmentNames.length=c};s.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(c,e,d){this.frames[c]=e;this.attachmentNames[c]=d},apply:function(c,e){var d=this.frames;e<d[0]||(d=e>=d[d.length-1]?d.length-1:s.binarySearch(d,e,1)-1,d=
this.attachmentNames[d],c.slots[this.slotIndex].setAttachment(d?c.getAttachmentBySlotIndex(this.slotIndex,d):null))}};s.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.animations=[]};s.SkeletonData.prototype={defaultSkin:null,findBone:function(c){for(var e=this.bones,d=0,f=e.length;f>d;d++)if(e[d].name==c)return e[d];return null},findBoneIndex:function(c){for(var e=this.bones,d=0,f=e.length;f>d;d++)if(e[d].name==c)return d;return-1},findSlot:function(c){for(var e=this.slots,
d=0,f=e.length;f>d;d++)if(e[d].name==c)return slot[d];return null},findSlotIndex:function(c){for(var e=this.slots,d=0,f=e.length;f>d;d++)if(e[d].name==c)return d;return-1},findSkin:function(c){for(var e=this.skins,d=0,f=e.length;f>d;d++)if(e[d].name==c)return e[d];return null},findAnimation:function(c){for(var e=this.animations,d=0,f=e.length;f>d;d++)if(e[d].name==c)return e[d];return null}};s.Skeleton=function(c){this.data=c;this.bones=[];for(var e=0,d=c.bones.length;d>e;e++){var f=c.bones[e],h=
f.parent?this.bones[c.bones.indexOf(f.parent)]:null;this.bones.push(new s.Bone(f,h))}this.slots=[];this.drawOrder=[];e=0;for(d=c.slots.length;d>e;e++)f=c.slots[e],h=this.bones[c.bones.indexOf(f.boneData)],f=new s.Slot(f,this,h),this.slots.push(f),this.drawOrder.push(f)};s.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var c=this.flipX,e=this.flipY,d=this.bones,f=0,h=d.length;h>f;f++)d[f].updateWorldTransform(c,e)},setToSetupPose:function(){this.setBonesToSetupPose();
this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var c=this.bones,e=0,d=c.length;d>e;e++)c[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var c=this.slots,e=0,d=c.length;d>e;e++)c[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(c){for(var e=this.bones,d=0,f=e.length;f>d;d++)if(e[d].data.name==c)return e[d];return null},findBoneIndex:function(c){for(var e=this.bones,d=0,f=e.length;f>d;d++)if(e[d].data.name==c)return d;
return-1},findSlot:function(c){for(var e=this.slots,d=0,f=e.length;f>d;d++)if(e[d].data.name==c)return e[d];return null},findSlotIndex:function(c){for(var e=this.slots,d=0,f=e.length;f>d;d++)if(e[d].data.name==c)return d;return-1},setSkinByName:function(c){var e=this.data.findSkin(c);if(!e)throw"Skin not found: "+c;this.setSkin(e)},setSkin:function(c){this.skin&&c&&c._attachAll(this,this.skin);this.skin=c},getAttachmentBySlotName:function(c,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(c),
e)},getAttachmentBySlotIndex:function(c,e){if(this.skin){var d=this.skin.getAttachment(c,e);if(d)return d}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(c,e):null},setAttachment:function(c,e){for(var d=this.slots,f=0,h=d.size;h>f;f++){var l=d[f];if(l.data.name==c){d=null;if(e&&(d=this.getAttachment(f,e),null==d))throw"Attachment not found: "+e+", for slot: "+c;return l.setAttachment(d),void 0}}throw"Slot not found: "+c;},update:function(c){time+=c}};s.AttachmentType={region:0};s.RegionAttachment=
function(){this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};s.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(c,e,d,f,h){var l=this.uvs;h?(l[2]=c,l[3]=f,l[4]=c,l[5]=e,l[6]=d,l[7]=e,l[0]=d,l[1]=f):(l[0]=c,l[1]=f,l[2]=c,l[3]=e,l[4]=d,l[5]=e,l[6]=d,l[7]=f)},updateOffset:function(){var c=this.width/this.regionOriginalWidth*
this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,d=-this.width/2*this.scaleX+this.regionOffsetX*c,f=-this.height/2*this.scaleY+this.regionOffsetY*e,h=d+this.regionWidth*c,c=f+this.regionHeight*e,e=this.rotation*Math.PI/180,l=Math.cos(e),m=Math.sin(e),e=d*l+this.x,d=d*m,n=f*l+this.y,f=f*m,q=h*l+this.x,h=h*m,l=c*l+this.y,c=c*m,m=this.offset;m[0]=e-f;m[1]=n+d;m[2]=e-c;m[3]=l+d;m[4]=q-c;m[5]=l+h;m[6]=q-f;m[7]=n+h},computeVertices:function(c,e,d,f){c+=d.worldX;e+=d.worldY;var h=d.m00,l=
d.m01,m=d.m10;d=d.m11;var n=this.offset;f[0]=n[0]*h+n[1]*l+c;f[1]=n[0]*m+n[1]*d+e;f[2]=n[2]*h+n[3]*l+c;f[3]=n[2]*m+n[3]*d+e;f[4]=n[4]*h+n[5]*l+c;f[5]=n[4]*m+n[5]*d+e;f[6]=n[6]*h+n[7]*l+c;f[7]=n[6]*m+n[7]*d+e}};s.AnimationStateData=function(c){this.skeletonData=c;this.animationToMixTime={}};s.AnimationStateData.prototype={defaultMix:0,setMixByName:function(c,d,k){var f=this.skeletonData.findAnimation(c);if(!f)throw"Animation not found: "+c;c=this.skeletonData.findAnimation(d);if(!c)throw"Animation not found: "+
d;this.setMix(f,c,k)},setMix:function(c,d,k){this.animationToMixTime[c.name+":"+d.name]=k},getMix:function(c,d){var k=this.animationToMixTime[c.name+":"+d.name];return k?k:this.defaultMix}};s.AnimationState=function(c){this.data=c;this.queue=[]};s.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(c){if(this.currentTime+=c,this.previousTime+=c,this.mixTime+=c,0<this.queue.length)c=this.queue[0],this.currentTime>=
c.delay&&(this._setAnimation(c.animation,c.loop),this.queue.shift())},apply:function(c){if(this.current)if(this.previous){this.previous.apply(c,this.previousTime,this.previousLoop);var d=this.mixTime/this.mixDuration;1<=d&&(d=1,this.previous=null);this.current.mix(c,this.currentTime,this.currentLoop,d)}else this.current.apply(c,this.currentTime,this.currentLoop)},clearAnimation:function(){this.current=this.previous=null;this.queue.length=0},_setAnimation:function(c,d){this.previous=null;c&&this.current&&
(this.mixDuration=this.data.getMix(this.current,c),0<this.mixDuration&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop));this.current=c;this.currentLoop=d;this.currentTime=0},setAnimationByName:function(c,d){var k=this.data.skeletonData.findAnimation(c);if(!k)throw"Animation not found: "+c;this.setAnimation(k,d)},setAnimation:function(c,d){this.queue.length=0;this._setAnimation(c,d)},addAnimationByName:function(c,d,k){var f=this.data.skeletonData.findAnimation(c);
if(!f)throw"Animation not found: "+c;this.addAnimation(f,d,k)},addAnimation:function(c,d,k){var f={};if(f.animation=c,f.loop=d,!k||0>=k)d=this.queue.length?this.queue[this.queue.length-1].animation:this.current,k=null!=d?d.duration-this.data.getMix(d,c)+(k||0):0;f.delay=k;this.queue.push(f)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}};s.SkeletonJson=function(c){this.attachmentLoader=c};s.SkeletonJson.prototype={scale:1,readSkeletonData:function(c){for(var d,
k=new s.SkeletonData,f=c.bones,h=0,l=f.length;l>h;h++){var m=f[h];d=null;if(m.parent&&(d=k.findBone(m.parent),!d))throw"Parent bone not found: "+m.parent;d=new s.BoneData(m.name,d);d.length=(m.length||0)*this.scale;d.x=(m.x||0)*this.scale;d.y=(m.y||0)*this.scale;d.rotation=m.rotation||0;d.scaleX=m.scaleX||1;d.scaleY=m.scaleY||1;k.bones.push(d)}f=c.slots;h=0;for(l=f.length;l>h;h++){m=f[h];if(d=k.findBone(m.bone),!d)throw"Slot bone not found: "+m.bone;var n=new s.SlotData(m.name,d),q=m.color;q&&(n.r=
s.SkeletonJson.toColor(q,0),n.g=s.SkeletonJson.toColor(q,1),n.b=s.SkeletonJson.toColor(q,2),n.a=s.SkeletonJson.toColor(q,3));n.attachmentName=m.attachment;k.slots.push(n)}var h=c.skins,p;for(p in h)if(h.hasOwnProperty(p)){l=h[p];d=new s.Skin(p);for(var u in l)if(l.hasOwnProperty(u)){var f=k.findSlotIndex(u),m=l[u],v;for(v in m)m.hasOwnProperty(v)&&(n=this.readAttachment(d,v,m[v]),null!=n&&d.addAttachment(f,v,n))}k.skins.push(d);"default"==d.name&&(k.defaultSkin=d)}c=c.animations;for(var t in c)c.hasOwnProperty(t)&&
this.readAnimation(t,c[t],k);return k},readAttachment:function(c,d,k){d=k.name||d;c=s.AttachmentType[k.type||"region"];if(c==s.AttachmentType.region)return c=new s.RegionAttachment,c.x=(k.x||0)*this.scale,c.y=(k.y||0)*this.scale,c.scaleX=k.scaleX||1,c.scaleY=k.scaleY||1,c.rotation=k.rotation||0,c.width=(k.width||32)*this.scale,c.height=(k.height||32)*this.scale,c.updateOffset(),c.rendererObject={},c.rendererObject.name=d,c.rendererObject.scale={},c.rendererObject.scale.x=c.scaleX,c.rendererObject.scale.y=
c.scaleY,c.rendererObject.rotation=-c.rotation*Math.PI/180,c;throw"Unknown attachment type: "+c;},readAnimation:function(c,d,k){var f,h,l,m,n,q,p,u=[],v=0,t=d.bones,w;for(w in t)if(t.hasOwnProperty(w)){var z=k.findBoneIndex(w);if(-1==z)throw"Bone not found: "+w;var y=t[w];for(l in y)if(y.hasOwnProperty(l))if(n=y[l],"rotate"==l){h=new s.RotateTimeline(n.length);h.boneIndex=z;q=f=0;for(p=n.length;p>q;q++)m=n[q],h.setFrame(f,m.time,m.angle),s.SkeletonJson.readCurve(h,f,m),f++;u.push(h);v=Math.max(v,
h.frames[2*h.getFrameCount()-2])}else{if("translate"!=l&&"scale"!=l)throw"Invalid timeline type for a bone: "+l+" ("+w+")";var x=1;"scale"==l?h=new s.ScaleTimeline(n.length):(h=new s.TranslateTimeline(n.length),x=this.scale);h.boneIndex=z;q=f=0;for(p=n.length;p>q;q++)m=n[q],h.setFrame(f,m.time,(m.x||0)*x,(m.y||0)*x),s.SkeletonJson.readCurve(h,f,m),f++;u.push(h);v=Math.max(v,h.frames[3*h.getFrameCount()-3])}}d=d.slots;for(var A in d)if(d.hasOwnProperty(A))for(l in t=d[A],w=k.findSlotIndex(A),t)if(t.hasOwnProperty(l))if(n=
t[l],"color"==l){h=new s.ColorTimeline(n.length);h.slotIndex=w;q=f=0;for(p=n.length;p>q;q++){m=n[q];var B=m.color,z=s.SkeletonJson.toColor(B,0),y=s.SkeletonJson.toColor(B,1),x=s.SkeletonJson.toColor(B,2),B=s.SkeletonJson.toColor(B,3);h.setFrame(f,m.time,z,y,x,B);s.SkeletonJson.readCurve(h,f,m);f++}u.push(h);v=Math.max(v,h.frames[5*h.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+A+")";h=new s.AttachmentTimeline(n.length);h.slotIndex=w;q=f=0;for(p=n.length;p>
q;q++)m=n[q],h.setFrame(f++,m.time,m.name);u.push(h);v=Math.max(v,h.frames[h.getFrameCount()-1])}k.animations.push(new s.Animation(c,u,v))}};s.SkeletonJson.readCurve=function(c,d,k){(k=k.curve)&&("stepped"==k?c.curves.setStepped(d):k instanceof Array&&c.curves.setCurve(d,k[0],k[1],k[2],k[3]))};s.SkeletonJson.toColor=function(c,d){if(8!=c.length)throw"Color hexidecimal length must be 8, recieved: "+c;return parseInt(c.substring(2*d,2),16)/255};s.Atlas=function(c,d){this.textureLoader=d;this.pages=
[];this.regions=[];var k=new s.AtlasReader(c),f=[];f.length=4;for(var h=null;;){var l=k.readLine();if(null==l)break;if(l=k.trim(l),l.length)if(h){var m=new s.AtlasRegion;m.name=l;m.page=h;m.rotate="true"==k.readValue();k.readTuple(f);var l=parseInt(f[0],10),n=parseInt(f[1],10);k.readTuple(f);var q=parseInt(f[0],10),p=parseInt(f[1],10);m.u=l/h.width;m.v=n/h.height;m.rotate?(m.u2=(l+p)/h.width,m.v2=(n+q)/h.height):(m.u2=(l+q)/h.width,m.v2=(n+p)/h.height);m.x=l;m.y=n;m.width=Math.abs(q);m.height=Math.abs(p);
4==k.readTuple(f)&&(m.splits=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)],4==k.readTuple(f)&&(m.pads=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)],k.readTuple(f)));m.originalWidth=parseInt(f[0],10);m.originalHeight=parseInt(f[1],10);k.readTuple(f);m.offsetX=parseInt(f[0],10);m.offsetY=parseInt(f[1],10);m.index=parseInt(k.readValue(),10);this.regions.push(m)}else h=new s.AtlasPage,h.name=l,h.format=s.Atlas.Format[k.readValue()],k.readTuple(f),
h.minFilter=s.Atlas.TextureFilter[f[0]],h.magFilter=s.Atlas.TextureFilter[f[1]],m=k.readValue(),h.uWrap=s.Atlas.TextureWrap.clampToEdge,h.vWrap=s.Atlas.TextureWrap.clampToEdge,"x"==m?h.uWrap=s.Atlas.TextureWrap.repeat:"y"==m?h.vWrap=s.Atlas.TextureWrap.repeat:"xy"==m&&(h.uWrap=h.vWrap=s.Atlas.TextureWrap.repeat),d.load(h,l),this.pages.push(h);else h=null}};s.Atlas.prototype={findRegion:function(c){for(var d=this.regions,k=0,f=d.length;f>k;k++)if(d[k].name==c)return d[k];return null},dispose:function(){for(var c=
this.pages,d=0,k=c.length;k>d;d++)this.textureLoader.unload(c[d].rendererObject)},updateUVs:function(c){for(var d=this.regions,k=0,f=d.length;f>k;k++){var h=d[k];h.page==c&&(h.u=h.x/c.width,h.v=h.y/c.height,h.rotate?(h.u2=(h.x+h.height)/c.width,h.v2=(h.y+h.width)/c.height):(h.u2=(h.x+h.width)/c.width,h.v2=(h.y+h.height)/c.height))}}};s.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};s.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,
mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};s.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};s.AtlasPage=function(){};s.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};s.AtlasRegion=function(){};s.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null};s.AtlasReader=
function(c){this.lines=c.split(/\r\n|\r|\n/)};s.AtlasReader.prototype={index:0,trim:function(c){return c.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var c=this.readLine(),d=c.indexOf(":");if(-1==d)throw"Invalid line: "+c;return this.trim(c.substring(d+1))},readTuple:function(c){var d=this.readLine(),k=d.indexOf(":");if(-1==k)throw"Invalid line: "+d;for(var f=0,k=k+1;3>f;f++){var h=d.indexOf(",",k);if(-1==h){if(!f)throw"Invalid line: "+
d;break}c[f]=this.trim(d.substr(k,h-k));k=h+1}return c[f]=this.trim(d.substring(k)),f+1}};s.AtlasAttachmentLoader=function(c){this.atlas=c};s.AtlasAttachmentLoader.prototype={newAttachment:function(c,d,k){switch(d){case s.AttachmentType.region:c=this.atlas.findRegion(k);if(!c)throw"Region not found in atlas: "+k+" ("+d+")";d=new s.RegionAttachment(k);return d.rendererObject=c,d.setUVs(c.u,c.v,c.u2,c.v2,c.rotate),d.regionOffsetX=c.offsetX,d.regionOffsetY=c.offsetY,d.regionWidth=c.width,d.regionHeight=
c.height,d.regionOriginalWidth=c.originalWidth,d.regionOriginalHeight=c.originalHeight,d}throw"Unknown attachment type: "+d;}};s.Bone.yDown=!0;d.AnimCache={};d.Spine=function(c){if(d.DisplayObjectContainer.call(this),this.spineData=d.AnimCache[c],!this.spineData)throw Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+c);this.skeleton=new s.Skeleton(this.spineData);this.skeleton.updateWorldTransform();this.stateData=new s.AnimationStateData(this.spineData);this.state=
new s.AnimationState(this.stateData);this.slotContainers=[];c=0;for(var e=this.skeleton.drawOrder.length;e>c;c++){var k=this.skeleton.drawOrder[c],f=k.attachment,h=new d.DisplayObjectContainer;if(this.slotContainers.push(h),this.addChild(h),f instanceof s.RegionAttachment){var l=f.rendererObject.name,f=this.createSprite(k,f.rendererObject);k.currentSprite=f;k.currentSpriteName=l;h.addChild(f)}}};d.Spine.prototype=Object.create(d.DisplayObjectContainer.prototype);d.Spine.prototype.constructor=d.Spine;
d.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var c=0.001*(Date.now()-this.lastTime);this.lastTime=Date.now();this.state.update(c);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();for(var c=this.skeleton.drawOrder,e=0,k=c.length;k>e;e++){var f=c[e],h=f.attachment,l=this.slotContainers[e];if(h instanceof s.RegionAttachment){if(h.rendererObject&&(!f.currentSpriteName||f.currentSpriteName!=h.name)){var m=h.rendererObject.name;if(void 0!==f.currentSprite&&
(f.currentSprite.visible=!1),f.sprites=f.sprites||{},void 0!==f.sprites[m])f.sprites[m].visible=!0;else{var n=this.createSprite(f,h.rendererObject);l.addChild(n)}f.currentSprite=f.sprites[m];f.currentSpriteName=m}l.visible=!0;m=f.bone;l.position.x=m.worldX+h.x*m.m00+h.y*m.m01;l.position.y=m.worldY+h.x*m.m10+h.y*m.m11;l.scale.x=m.worldScaleX;l.scale.y=m.worldScaleY;l.rotation=-(f.bone.worldRotation*Math.PI/180)}else l.visible=!1}d.DisplayObjectContainer.prototype.updateTransform.call(this)};d.Spine.prototype.createSprite=
function(c,e){var k=new d.Sprite(d.Texture.fromFrame(d.TextureCache[e.name]?e.name:e.name+".png"));return k.scale=e.scale,k.rotation=e.rotation,k.anchor.x=k.anchor.y=0.5,c.sprites=c.sprites||{},c.sprites[e.name]=k,k};d.BaseTextureCache={};d.texturesToUpdate=[];d.texturesToDestroy=[];d.BaseTextureCacheIdGenerator=0;d.BaseTexture=function(c,e){if(d.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=e||d.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=c,this.id=d.BaseTextureCacheIdGenerator++,
this._glTextures=[],c){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,d.texturesToUpdate.push(this);else{var k=this;this.source.onload=function(){k.hasLoaded=!0;k.width=k.source.width;k.height=k.source.height;d.texturesToUpdate.push(k);k.dispatchEvent({type:"loaded",content:k})}}this.imageUrl=null;this._powerOf2=!1}};d.BaseTexture.prototype.constructor=d.BaseTexture;d.BaseTexture.prototype.destroy=
function(){this.imageUrl&&(delete d.BaseTextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null);this.source=null;d.texturesToDestroy.push(this)};d.BaseTexture.prototype.updateSourceImage=function(c){this.hasLoaded=!1;this.source.src=null;this.source.src=c};d.BaseTexture.fromImage=function(c,e,k){var f=d.BaseTextureCache[c];(void 0===e&&-1===c.indexOf("data:")&&(e=!0),f)||(f=new Image,e&&(f.crossOrigin=""),f.src=c,f=new d.BaseTexture(f,k),f.imageUrl=c,d.BaseTextureCache[c]=f);return f};
d.BaseTexture.fromCanvas=function(c,e){c._pixiId||(c._pixiId="canvas_"+d.TextureCacheIdGenerator++);var k=d.BaseTextureCache[c._pixiId];return k||(k=new d.BaseTexture(c,e),d.BaseTextureCache[c._pixiId]=k),k};d.TextureCache={};d.FrameCache={};d.TextureCacheIdGenerator=0;d.Texture=function(c,e){if(d.EventTarget.call(this),e||(this.noFrame=!0,e=new d.Rectangle(0,0,1,1)),c instanceof d.Texture&&(c=c.baseTexture),this.baseTexture=c,this.frame=e,this.trim=null,this.scope=this,this._uvs=null,c.hasLoaded)this.noFrame&&
(e=new d.Rectangle(0,0,c.width,c.height)),this.setFrame(e);else{var k=this;c.addEventListener("loaded",function(){k.onBaseTextureLoaded()})}};d.Texture.prototype.constructor=d.Texture;d.Texture.prototype.onBaseTextureLoaded=function(){var c=this.baseTexture;c.removeEventListener("loaded",this.onLoaded);this.noFrame&&(this.frame=new d.Rectangle(0,0,c.width,c.height));this.setFrame(this.frame);this.scope.dispatchEvent({type:"update",content:this})};d.Texture.prototype.destroy=function(c){c&&this.baseTexture.destroy()};
d.Texture.prototype.setFrame=function(c){if(this.frame=c,this.width=c.width,this.height=c.height,c.x+c.width>this.baseTexture.width||c.y+c.height>this.baseTexture.height)throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0;d.Texture.frameUpdates.push(this)};d.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new d.TextureUvs);var c=this.frame,e=this.baseTexture.width,k=this.baseTexture.height;this._uvs.x0=c.x/e;this._uvs.y0=
c.y/k;this._uvs.x1=(c.x+c.width)/e;this._uvs.y1=c.y/k;this._uvs.x2=(c.x+c.width)/e;this._uvs.y2=(c.y+c.height)/k;this._uvs.x3=c.x/e;this._uvs.y3=(c.y+c.height)/k};d.Texture.fromImage=function(c,e,k){var f=d.TextureCache[c];return f||(f=new d.Texture(d.BaseTexture.fromImage(c,e,k)),d.TextureCache[c]=f),f};d.Texture.fromFrame=function(c){var e=d.TextureCache[c];if(!e)throw Error('The frameId "'+c+'" does not exist in the texture cache ');return e};d.Texture.fromCanvas=function(c,e){var k=d.BaseTexture.fromCanvas(c,
e);return new d.Texture(k)};d.Texture.addTextureToCache=function(c,e){d.TextureCache[e]=c};d.Texture.removeTextureFromCache=function(c){var e=d.TextureCache[c];return delete d.TextureCache[c],delete d.BaseTextureCache[c],e};d.Texture.frameUpdates=[];d.TextureUvs=function(){this.y4=this.x3=this.y2=this.x2=this.y1=this.x1=this.y0=this.x0=0};d.RenderTexture=function(c,e,k,f){(d.EventTarget.call(this),this.width=c||100,this.height=e||100,this.frame=new d.Rectangle(0,0,this.width,this.height),this.baseTexture=
new d.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=f||d.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=k||d.defaultRenderer,this.renderer.type===d.WEBGL_RENDERER)?(c=this.renderer.gl,this.textureBuffer=new d.FilterTexture(c,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[c.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new d.Point(this.width/
2,-this.height/2)):(this.render=this.renderCanvas,this.textureBuffer=new d.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas);d.Texture.frameUpdates.push(this)};d.RenderTexture.prototype=Object.create(d.Texture.prototype);d.RenderTexture.prototype.constructor=d.RenderTexture;d.RenderTexture.prototype.resize=function(c,e){if(this.width=c,this.height=e,this.frame.width=this.width,this.frame.height=this.height,this.renderer.type===d.WEBGL_RENDERER){this.projection.x=
this.width/2;this.projection.y=-this.height/2;var k=this.renderer.gl;k.bindTexture(k.TEXTURE_2D,this.baseTexture._glTextures[k.id]);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,this.width,this.height,0,k.RGBA,k.UNSIGNED_BYTE,null)}else this.textureBuffer.resize(this.width,this.height);d.Texture.frameUpdates.push(this)};d.RenderTexture.prototype.renderWebGL=function(c,e,k){var f=this.renderer.gl;f.colorMask(!0,!0,!0,!0);f.viewport(0,0,this.width,this.height);f.bindFramebuffer(f.FRAMEBUFFER,this.textureBuffer.frameBuffer);
k&&this.textureBuffer.clear();k=c.children;f=c.worldTransform;c.worldTransform=d.RenderTexture.tempMatrix;c.worldTransform.d=-1;c.worldTransform.ty=-2*this.projection.y;e&&(c.worldTransform.tx=e.x,c.worldTransform.ty-=e.y);e=0;for(var h=k.length;h>e;e++)k[e].updateTransform();d.WebGLRenderer.updateTextures();this.renderer.renderDisplayObject(c,this.projection,this.textureBuffer.frameBuffer);c.worldTransform=f};d.RenderTexture.prototype.renderCanvas=function(c,e,k){var f=c.children,h=c.worldTransform;
c.worldTransform=d.RenderTexture.tempMatrix;e&&(c.worldTransform.tx=e.x,c.worldTransform.ty=e.y);e=0;for(var l=f.length;l>e;e++)f[e].updateTransform();k&&this.textureBuffer.clear();k=this.textureBuffer.context;this.renderer.renderDisplayObject(c,k);k.setTransform(1,0,0,1,0,0);c.worldTransform=h};d.RenderTexture.tempMatrix=new d.Matrix;d.AssetLoader=function(c,e){d.EventTarget.call(this);this.assetURLs=c;this.crossorigin=e;this.loadersByType={jpg:d.ImageLoader,jpeg:d.ImageLoader,png:d.ImageLoader,
gif:d.ImageLoader,json:d.JsonLoader,atlas:d.AtlasLoader,anim:d.SpineLoader,xml:d.BitmapFontLoader,fnt:d.BitmapFontLoader}};d.AssetLoader.prototype.constructor=d.AssetLoader;d.AssetLoader.prototype._getDataType=function(c){if("data:"===c.slice(0,5).toLowerCase()){c=c.slice(5);var d=c.indexOf(",");return-1===d?null:(c=c.slice(0,d).split(";")[0])&&"text/plain"!==c.toLowerCase()?c.split("/").pop().toLowerCase():"txt"}return null};d.AssetLoader.prototype.load=function(){function c(c){d.onAssetLoaded(c.content)}
var d=this;this.loadCount=this.assetURLs.length;for(var k=0;k<this.assetURLs.length;k++){var f=this.assetURLs[k],h=this._getDataType(f);h||(h=f.split("?").shift().split(".").pop().toLowerCase());var l=this.loadersByType[h];if(!l)throw Error(h+" is an unsupported file type");f=new l(f,this.crossorigin);f.addEventListener("loaded",c);f.load()}};d.AssetLoader.prototype.onAssetLoaded=function(c){this.loadCount--;this.dispatchEvent({type:"onProgress",content:this,loader:c});this.onProgress&&this.onProgress(c);
this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())};d.JsonLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,"");this.loaded=!1};d.JsonLoader.prototype.constructor=d.JsonLoader;d.JsonLoader.prototype.load=function(){var c=this;window.XDomainRequest?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3E3,this.ajaxRequest.onerror=function(){c.onError()},this.ajaxRequest.ontimeout=
function(){c.onError()},this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");this.ajaxRequest.onload=function(){c.onJSONLoaded()};this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.send()};d.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return this.onError(),void 0;if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var c=this,e=new d.ImageLoader(this.baseUrl+
this.json.meta.image,this.crossorigin),k=this.json.frames;this.texture=e.texture.baseTexture;e.addEventListener("loaded",function(){c.onLoaded()});for(var f in k){var h=k[f].frame;if(h&&(d.TextureCache[f]=new d.Texture(this.texture,{x:h.x,y:h.y,width:h.w,height:h.h}),k[f].trimmed)){var h=k[f].sourceSize,l=k[f].spriteSourceSize;d.TextureCache[f].trim=new d.Rectangle(l.x,l.y,h.w,h.h)}}e.load()}else this.json.bones&&(e=(new s.SkeletonJson).readSkeletonData(this.json),d.AnimCache[this.url]=e),this.onLoaded()};
d.JsonLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",content:this})};d.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})};d.AtlasLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.baseUrl=c.replace(/[^\/]*$/,"");this.crossorigin=e;this.loaded=!1};d.AtlasLoader.constructor=d.AtlasLoader;d.AtlasLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest;this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this);
this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json");this.ajaxRequest.send(null)};d.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};for(var c=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,k=0,f=null,h=!1,l=0,m=0,n=this.onLoaded.bind(this),l=0;l<c.length;l++)if(c[l]=c[l].replace(/^\s+|\s+$/g,
""),""===c[l]&&(h=l+1),0<c[l].length)h===l?(this.atlas.meta.image.push(c[l]),k=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3):0<e&&(1===e%7?(null!=f&&(this.atlas.frames[k][f.name]=f),f={name:c[l],frame:{}}):(m=c[l].split(" "),3===e%7?(f.frame.x=Number(m[1].replace(",","")),f.frame.y=Number(m[2])):4===e%7?(f.frame.w=Number(m[1].replace(",","")),f.frame.h=Number(m[2])):5===e%7&&(m={x:0,y:0,w:Number(m[1].replace(",","")),h:Number(m[2])},m.w>f.frame.w||m.h>f.frame.h?(f.trimmed=!0,f.realSize=
m):f.trimmed=!1))),e++;if(null!=f&&(this.atlas.frames[k][f.name]=f),0<this.atlas.meta.image.length){this.images=[];for(m=0;m<this.atlas.meta.image.length;m++)for(l in c=this.atlas.frames[m],this.images.push(new d.ImageLoader(this.baseUrl+this.atlas.meta.image[m],this.crossorigin)),c)(e=c[l].frame)&&(d.TextureCache[l]=new d.Texture(this.images[m].texture.baseTexture,{x:e.x,y:e.y,width:e.w,height:e.h}),c[l].trimmed&&(d.TextureCache[l].realSize=c[l].realSize,d.TextureCache[l].trim.x=0,d.TextureCache[l].trim.y=
0));for(m=this.currentImageId=0;m<this.images.length;m++)this.images[m].addEventListener("loaded",n);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()};d.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))};d.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})};d.SpriteSheetLoader=
function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,"");this.texture=null;this.frames={}};d.SpriteSheetLoader.prototype.constructor=d.SpriteSheetLoader;d.SpriteSheetLoader.prototype.load=function(){var c=this,e=new d.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(d){c.json=d.content.json;c.onLoaded()});e.load()};d.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};d.ImageLoader=
function(c,e){d.EventTarget.call(this);this.texture=d.Texture.fromImage(c,e);this.frames=[]};d.ImageLoader.prototype.constructor=d.ImageLoader;d.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var c=this;this.texture.baseTexture.addEventListener("loaded",function(){c.onLoaded()})}};d.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};d.ImageLoader.prototype.loadFramedSpriteSheet=function(c,e,k){this.frames=[];
for(var f=Math.floor(this.texture.width/c),h=Math.floor(this.texture.height/e),l=0,m=0;h>m;m++)for(var n=0;f>n;n++,l++){var q=new d.Texture(this.texture,{x:n*c,y:m*e,width:c,height:e});this.frames.push(q);k&&(d.TextureCache[k+"-"+l]=q)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var p=this;this.texture.baseTexture.addEventListener("loaded",function(){p.onLoaded()})}};d.BitmapFontLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.baseUrl=c.replace(/[^\/]*$/,
"");this.texture=null};d.BitmapFontLoader.prototype.constructor=d.BitmapFontLoader;d.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest;var c=this;this.ajaxRequest.onreadystatechange=function(){c.onXMLLoaded()};this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml");this.ajaxRequest.send(null)};d.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||
-1===window.location.protocol.indexOf("http"))){var c=this.ajaxRequest.responseXML;if(!c||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser)c=(new DOMParser).parseFromString(this.ajaxRequest.responseText,"text/xml");else{var e=document.createElement("div");e.innerHTML=this.ajaxRequest.responseText;c=e}e=this.baseUrl+c.getElementsByTagName("page")[0].getAttribute("file");e=new d.ImageLoader(e,this.crossorigin);this.texture=e.texture.baseTexture;var k=
{},f=c.getElementsByTagName("info")[0],h=c.getElementsByTagName("common")[0];k.font=f.getAttribute("face");k.size=parseInt(f.getAttribute("size"),10);k.lineHeight=parseInt(h.getAttribute("lineHeight"),10);k.chars={};h=c.getElementsByTagName("char");for(f=0;f<h.length;f++){var l=parseInt(h[f].getAttribute("id"),10),m=new d.Rectangle(parseInt(h[f].getAttribute("x"),10),parseInt(h[f].getAttribute("y"),10),parseInt(h[f].getAttribute("width"),10),parseInt(h[f].getAttribute("height"),10));k.chars[l]={xOffset:parseInt(h[f].getAttribute("xoffset"),
10),yOffset:parseInt(h[f].getAttribute("yoffset"),10),xAdvance:parseInt(h[f].getAttribute("xadvance"),10),kerning:{},texture:d.TextureCache[l]=new d.Texture(this.texture,m)}}c=c.getElementsByTagName("kerning");for(f=0;f<c.length;f++)h=parseInt(c[f].getAttribute("first"),10),l=parseInt(c[f].getAttribute("second"),10),m=parseInt(c[f].getAttribute("amount"),10),k.chars[l].kerning[h]=m;d.BitmapText.fonts[k.font]=k;var n=this;e.addEventListener("loaded",function(){n.onLoaded()});e.load()}};d.BitmapFontLoader.prototype.onLoaded=
function(){this.dispatchEvent({type:"loaded",content:this})};d.SpineLoader=function(c,e){d.EventTarget.call(this);this.url=c;this.crossorigin=e;this.loaded=!1};d.SpineLoader.prototype.constructor=d.SpineLoader;d.SpineLoader.prototype.load=function(){var c=this,e=new d.JsonLoader(this.url,this.crossorigin);e.addEventListener("loaded",function(d){c.json=d.content.json;c.onLoaded()});e.load()};d.SpineLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",content:this})};
d.AbstractFilter=function(c,d){this.passes=[this];this.shaders=[];this.dirty=!0;this.padding=0;this.uniforms=d||{};this.fragmentSrc=c||[]};d.AlphaMaskFilter=function(c){d.AbstractFilter.call(this);this.passes=[this];c.baseTexture._powerOf2=!0;this.uniforms={mask:{type:"sampler2D",value:c},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};c.baseTexture.hasLoaded?(this.uniforms.mask.value.x=c.width,this.uniforms.mask.value.y=c.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),
c.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;",
"   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]};d.AlphaMaskFilter.prototype=Object.create(d.AbstractFilter.prototype);d.AlphaMaskFilter.prototype.constructor=d.AlphaMaskFilter;d.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height;this.uniforms.mask.value.baseTexture.off("loaded",
this.boundLoadedFunction)};Object.defineProperty(d.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(c){this.uniforms.mask.value=c}});d.ColorMatrixFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;",
"void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]};d.ColorMatrixFilter.prototype=Object.create(d.AbstractFilter.prototype);d.ColorMatrixFilter.prototype.constructor=d.ColorMatrixFilter;Object.defineProperty(d.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(c){this.uniforms.matrix.value=c}});d.GrayFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={gray:{type:"1f",value:1}};this.fragmentSrc=
["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]};d.GrayFilter.prototype=Object.create(d.AbstractFilter.prototype);d.GrayFilter.prototype.constructor=d.GrayFilter;Object.defineProperty(d.GrayFilter.prototype,
"gray",{get:function(){return this.uniforms.gray.value},set:function(c){this.uniforms.gray.value=c}});d.DisplacementFilter=function(c){d.AbstractFilter.call(this);this.passes=[this];c.baseTexture._powerOf2=!0;this.uniforms={displacementMap:{type:"sampler2D",value:c},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};c.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=c.width,this.uniforms.mapDimensions.value.y=
c.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),c.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;",
"   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]};d.DisplacementFilter.prototype=Object.create(d.AbstractFilter.prototype);d.DisplacementFilter.prototype.constructor=
d.DisplacementFilter;d.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height;this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)};Object.defineProperty(d.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(c){this.uniforms.displacementMap.value=c}});Object.defineProperty(d.DisplacementFilter.prototype,
"scale",{get:function(){return this.uniforms.scale.value},set:function(c){this.uniforms.scale.value=c}});Object.defineProperty(d.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(c){this.uniforms.offset.value=c}});d.PixelateFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1E4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}};this.fragmentSrc=
["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]};d.PixelateFilter.prototype=Object.create(d.AbstractFilter.prototype);d.PixelateFilter.prototype.constructor=
d.PixelateFilter;Object.defineProperty(d.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(c){this.dirty=!0;this.uniforms.pixelSize.value=c}});d.BlurXFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]};d.BlurXFilter.prototype=Object.create(d.AbstractFilter.prototype);d.BlurXFilter.prototype.constructor=d.BlurXFilter;Object.defineProperty(d.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/
(1/7E3)},set:function(c){this.dirty=!0;this.uniforms.blur.value=1/7E3*c}});d.BlurYFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]};d.BlurYFilter.prototype=Object.create(d.AbstractFilter.prototype);d.BlurYFilter.prototype.constructor=d.BlurYFilter;Object.defineProperty(d.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});d.BlurFilter=function(){this.blurXFilter=new d.BlurXFilter;this.blurYFilter=new d.BlurYFilter;this.passes=
[this.blurXFilter,this.blurYFilter]};Object.defineProperty(d.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=this.blurYFilter.blur=c}});Object.defineProperty(d.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=c}});Object.defineProperty(d.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(c){this.blurYFilter.blur=c}});d.InvertFilter=function(){d.AbstractFilter.call(this);
this.passes=[this];this.uniforms={invert:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]};d.InvertFilter.prototype=Object.create(d.AbstractFilter.prototype);d.InvertFilter.prototype.constructor=
d.InvertFilter;Object.defineProperty(d.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(c){this.uniforms.invert.value=c}});d.SepiaFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={sepia:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);",
"void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]};d.SepiaFilter.prototype=Object.create(d.AbstractFilter.prototype);d.SepiaFilter.prototype.constructor=d.SepiaFilter;Object.defineProperty(d.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(c){this.uniforms.sepia.value=c}});d.TwistFilter=function(){d.AbstractFilter.call(this);this.passes=
[this];this.uniforms={radius:{type:"1f",value:0.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:0.5,y:0.5}}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;",
"       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]};d.TwistFilter.prototype=Object.create(d.AbstractFilter.prototype);d.TwistFilter.prototype.constructor=d.TwistFilter;Object.defineProperty(d.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(c){this.dirty=
!0;this.uniforms.offset.value=c}});Object.defineProperty(d.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(c){this.dirty=!0;this.uniforms.radius.value=c}});Object.defineProperty(d.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(c){this.dirty=!0;this.uniforms.angle.value=c}});d.ColorStepFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={step:{type:"1f",value:5}};this.fragmentSrc=
["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]};d.ColorStepFilter.prototype=Object.create(d.AbstractFilter.prototype);d.ColorStepFilter.prototype.constructor=d.ColorStepFilter;Object.defineProperty(d.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},
set:function(c){this.uniforms.step.value=c}});d.DotScreenFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;",
"   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]};d.DotScreenFilter.prototype=Object.create(d.AbstractFilter.prototype);d.DotScreenFilter.prototype.constructor=d.DotScreenFilter;Object.defineProperty(d.DotScreenFilter.prototype,
"scale",{get:function(){return this.uniforms.scale.value},set:function(c){this.dirty=!0;this.uniforms.scale.value=c}});Object.defineProperty(d.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(c){this.dirty=!0;this.uniforms.angle.value=c}});d.CrossHatchFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;",
"uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }",
"    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]};d.CrossHatchFilter.prototype=Object.create(d.AbstractFilter.prototype);d.CrossHatchFilter.prototype.constructor=d.BlurYFilter;Object.defineProperty(d.CrossHatchFilter.prototype,
"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});d.RGBSplitFilter=function(){d.AbstractFilter.call(this);this.passes=[this];this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;",
"uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]};d.RGBSplitFilter.prototype=Object.create(d.AbstractFilter.prototype);d.RGBSplitFilter.prototype.constructor=d.RGBSplitFilter;
Object.defineProperty(d.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(c){this.uniforms.blur.value=1/7E3*c}});"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.PIXI=d):"undefined"!=typeof define&&define.amd?define(d):this.PIXI=d}).call(this);
