function Cthod(a,b,c,f,d,e,g,h){this.world=a;this.stage=b;this.worldwidth=c;this.worldheight=f;this.viewwidth=d;this.viewheight=e;this.worldx=g;this.worldy=h;this.open=!1;this.textures=["cthod_1.png","cthod_2.png","cthod_3.png","cthod_4.png","cthod_5.png"];this.textures_open=["cthod_open_1.png","cthod_open_2.png","cthod_open_3.png"];this.textureincrement=0;this.texturevector=1;this.deltav=new PARTSYS.Vector(0,0);this.cthlies=[];this.cthingsoundplaying=!1;this.cthingsound=new Howl({urls:["resources/sounds/cthod_move.mp3"],
onend:function(){this.cthingsoundplaying=!1}.bind(this)});GameObject.call(this,this.textures[0],48,64,c,f,d,e,g,h);this.timeoutID=setTimeout(this.updateTexture.bind(this),160)}Cthod.constructor=Cthod;Cthod.prototype=Object.create(GameObject.prototype);Cthod.prototype.cleanup=function(){var a;this.timeoutID&&clearTimeout(this.timeoutID);this.cthingsound.stop();for(a=this.cthlies.length-1;0<=a;a--)this.removeCthly(a)};
Cthod.prototype.removeCthly=function(a){a=this.cthlies.splice(a,1)[0];a.cleanup();this.stage.removeChild(a);a=new ExplodyCthing(this.stage,this.world.particlesystem,a.muto,GameWorld.WORLDMAX,540,960,540,a.worldx,a.worldy,this.camerax);(new Howl({urls:["resources/sounds/cthquish.mp3"],volume:1})).play();a.onDone=this.world.removeSplody.bind(this);this.world.splodythings.push(a)};
Cthod.prototype.everySecondNormal=function(a){var b;a=0===this.deltav.x&&0===this.deltav.y?1:0.75;Math.random()<a&&(a=Math.random(),b=Math.random(),0.17>a?this.deltav.x=-1:0.34>a?this.deltav.x=1:0.51>a&&(this.deltav.x=0),0.17>b?this.deltav.y=-1:0.34>b?this.deltav.y=1:0.51>b&&(this.deltav.y=0),0.83<a&&0.83<b&&(this.open=!0,this.deltav.x=0,this.deltav.y=0,this.textureincrement=-1,this.texturevector=1))};
Cthod.prototype.everySecondOpen=function(a){0.3>Math.random()&&(this.open=!1,this.textureincrement=-1,this.texturevector=1,this.everySecondNormal(a))};Cthod.prototype.everySecond=function(a){this.open?this.everySecondOpen(a):this.everySecondNormal(a)};Cthod.prototype.updateSound=function(){this.world.player&&(this.visible&&!this.cthingsoundplaying&&(this.cthingsoundplaying=!0,this.cthingsound.play()),!this.visible&&this.cthingsoundplaying&&(this.cthingsound.stop(),this.cthingsoundplaying=!1))};
Cthod.prototype.updateTexture=function(){var a,b;this.open?(b=this.textures_open,this.textureincrement>=this.textures_open.length&&(a=new Cthly(this.world,this.stage,GameWorld.WORLDMAX,540,960,540,this.worldx+24,this.worldy+32),this.stage.addChild(a),this.cthlies.push(a))):b=this.textures;this.textureincrement+=this.texturevector;this.textureincrement>=b.length&&(this.open&&(a=new Cthly(this.world,this.stage,GameWorld.WORLDMAX,540,960,540,this.worldx+24,this.worldy+32),this.stage.addChild(a),this.cthlies.push(a)),
this.texturevector=-this.texturevector,this.textureincrement=b.length-1);0>this.textureincrement&&(this.open&&(this.open=!1),this.textureincrement=0,this.texturevector=-this.texturevector);this.visible&&(a=PIXI.Texture.fromFrame(b[this.textureincrement]),this.setTexture(a));this.timeoutID=setTimeout(this.updateTexture.bind(this),160)};
Cthod.prototype.update=function(a,b){var c,f=this.worldy,d,e=-1;this.visible=!1;this.worldx+=this.deltav.x*b*PARTSYS.framerate;this.worldy+=this.deltav.y*b*PARTSYS.framerate;0>this.worldy&&(this.worldy=0,this.deltav.y=-this.deltav.y);this.worldy>=0.66*this.viewheight-this.height&&(this.worldy=0.66*this.viewheight-this.height,this.deltav.y=-this.deltav.y);this.worldx>this.worldwidth&&(this.worldx=this.worldx-this.worldwidth+1);0>this.worldx&&(this.worldx=this.worldwidth+this.worldx+1);d=a+this.viewwidth;
d>this.worldwidth&&(e=d-this.worldwidth-1);-1===e?this.worldx>a-this.width&&this.worldx<d+this.width&&(c=this.worldx-a,this.visible=!0):this.worldx>a-this.width&&this.worldx<=this.worldwidth?(c=this.worldx-a,this.visible=!0):this.worldx<e+this.width&&(c=this.worldwidth-a+this.worldx,this.visible=!0);this.visible&&(this.position.x=c,this.position.y=f);for(c=0;c<this.cthlies.length;c++)this.cthlies[c].update(a,b);this.updateSound()};
