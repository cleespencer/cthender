function ExplodyMan(b,c,a,e,d,h,k){var f,g;this.stage=b;this.worldwidth=c;this.worldheight=a;this.viewwidth=e;this.viewheight=d;this.worldx=h;this.worldy=k;this.initialPlacement=!0;this.splatArray=["man_splat_1.png","man_splat_2.png","man_splat_3.png","man_splat_4.png"];for(b=0;b<this.splatArray.length;b++)PIXI.Texture.fromFrame(this.splatArray[b]);a=new PIXI.Sprite(PIXI.Texture.fromFrame(this.splatArray[0]),8,8);a.visible=!1;e=h+4;d=k+10;f=2*Math.random()-1;g=2*Math.random()-1;this.splat={sprite:a,
x:e,y:d,vectorx:f,vectory:g};this.splatincrement=0;this.stage.addChild(a);this.limbs=[];c=PIXI.Texture.fromFrame("man_limb.png");for(b=0;4>b;b++)a=new PIXI.Sprite(c,8,8),this.stage.addChild(a),a.visible=!1,a.anchor.x=0.5,a.anchor.y=0.5,e=h+6,d=k+12,f=8*Math.random()-4,g=8*Math.random()-4,a.rotation=6*Math.random(),this.limbs.push({sprite:a,x:e,y:d,vectorx:f,vectory:g});a=new PIXI.Sprite(PIXI.Texture.fromFrame("man_head.png"),8,8);this.stage.addChild(a);a.visible=!1;a.anchor.x=0.5;a.anchor.y=0.5;e=
h+6;d=k+12;f=8*Math.random()-4;g=8*Math.random()-4;this.melon={sprite:a,x:e,y:d,vectorx:f,vectory:g}}ExplodyMan.constructor=ExplodyMan;ExplodyMan.prototype.cleanup=function(){var b;for(b=0;b<this.limbs.length;b++)this.stage.removeChild(this.limbs[b].sprite);this.stage.removeChild(this.splat.sprite);this.stage.removeChild(this.melon.sprite);this.onDone(this)};
ExplodyMan.prototype.getPosX=function(b,c){var a=b+this.viewwidth,e=-1,d;a>this.worldwidth&&(e=a-this.worldwidth-1);-1===e?d=c-b:this.worldx>=b-12&&c<=this.worldwidth?d=c-b:c<=e&&(d=this.worldwidth-b+c);return d};
ExplodyMan.prototype.update=function(b){var c,a;if(this.initialPlacement){this.melon.sprite.position.x=this.getPosX(b,this.melon.x);this.melon.sprite.position.y=this.melon.y;this.melon.sprite.visible=!0;this.splat.sprite.position.x=this.getPosX(b,this.splat.x);this.splat.sprite.position.y=this.splat.y;this.splat.sprite.visible=!0;for(c=0;c<this.limbs.length;c++)this.limbs[c].sprite.position.x=this.getPosX(b,this.limbs[c].x),this.limbs[c].sprite.position.y=this.limbs[c].y,this.limbs[c].sprite.visible=
!0;this.initialPlacement=!1}else if(this.splatincrement+=0.1,this.splatincrement>=this.splatArray.length)this.cleanup();else for(c=PIXI.Texture.fromFrame(this.splatArray[Math.floor(this.splatincrement)]),this.splat.sprite.position.x=this.getPosX(b,this.splat.x),this.splat.sprite.setTexture(c),this.melon.x+=0.1*this.melon.vectorx,this.melon.y+=0.1*this.melon.vectory,this.melon.sprite.position.x=this.getPosX(b,this.melon.x),this.melon.sprite.position.y=this.melon.y,c=0;c<this.limbs.length;c++)a=this.limbs[c],
a.x+=0.1*a.vectorx,a.y+=0.1*a.vectory,a.sprite.rotation+=1,a.sprite.position.x=this.getPosX(b,a.x),a.sprite.position.y=a.y};
