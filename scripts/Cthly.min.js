function Cthly(a,b,c,f,d,e,g,h){this.world=a;this.stage=b;this.worldwidth=c;this.worldheight=f;this.viewwidth=d;this.viewheight=e;this.worldx=g+0;this.worldy=h+0;this.muto=!1;this.textures=["cthly1.png","cthly2.png","cthly3.png","cthly4.png"];this.textureincrement=0;this.texturevector=1;this.deltav=new PARTSYS.Vector(2*(10*Math.random()-5),0);this.cthingsoundplaying=!1;this.cthingsound=new Howl({urls:["resources/sounds/cthly_move.mp3"],onend:function(){this.cthingsoundplaying=!1}.bind(this)});GameObject.call(this,
this.textures[0],12,12,c,f,d,e,g,h);this.timeoutID=setTimeout(this.updateTexture.bind(this),160)}Cthly.constructor=Cthly;Cthly.prototype=Object.create(GameObject.prototype);Cthly.prototype.cleanup=function(){this.timeoutID&&clearTimeout(this.timeoutID);this.cthingsound.stop()};
Cthly.prototype.everySecondNormal=function(a){var b;a=0===this.deltav.x&&0===this.deltav.y?1:0.75;Math.random()<a&&(a=Math.random(),b=Math.random(),0.15>a?this.deltav.x=-5*Math.random():0.3>a&&(this.deltav.x=5*Math.random()),this.deltav.y=0.05>b?-1:0.1>b?1:0)};Cthly.prototype.everySecond=function(a){this.everySecondNormal(a)};
Cthly.prototype.updateSound=function(){this.world.player&&(this.visible&&!this.cthingsoundplaying&&(this.cthingsoundplaying=!0,this.cthingsound.play()),!this.visible&&this.cthingsoundplaying&&(this.cthingsound.stop(),this.cthingsoundplaying=!1))};
Cthly.prototype.updateTexture=function(){var a;this.textureincrement+=this.texturevector;this.textureincrement>=this.textures.length&&(this.texturevector=-this.texturevector,this.textureincrement=this.textures.length-1);0>this.textureincrement&&(this.textureincrement=1,this.texturevector=-this.texturevector);this.visible&&(a=PIXI.Texture.fromFrame(this.textures[this.textureincrement]),this.setTexture(a));this.timeoutID=setTimeout(this.updateTexture.bind(this),160)};
Cthly.prototype.update=function(a,b){var c,f=this.worldy,d,e=-1;this.visible=!1;this.worldx+=this.deltav.x*b*PARTSYS.framerate;this.worldy+=this.deltav.y*b*PARTSYS.framerate;0>this.worldy&&(this.worldy=0,this.deltav.y=-this.deltav.y);this.worldy>=this.viewheight-this.height&&(this.worldy=this.viewheight-this.height,this.deltav.y=-this.deltav.y);this.worldx>this.worldwidth&&(this.worldx=this.worldx-this.worldwidth+1);0>this.worldx&&(this.worldx=this.worldwidth+this.worldx+1);d=a+this.viewwidth;d>this.worldwidth&&
(e=d-this.worldwidth-1);-1===e?this.worldx>a-this.width&&this.worldx<d+this.width&&(c=this.worldx-a,this.visible=!0):this.worldx>a-this.width&&this.worldx<=this.worldwidth?(c=this.worldx-a,this.visible=!0):this.worldx<e+this.width&&(c=this.worldwidth-a+this.worldx,this.visible=!0);this.visible&&(this.position.x=c,this.position.y=f);this.updateSound()};
