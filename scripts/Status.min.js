function Status(a,b,c){this.stage=a;this.game=b;this.world=c;this.particlesystem=new PARTSYS.ParticleSystem;this.g=new PIXI.Graphics;this.stage.addChild(this.g);this.g.x=0;this.g.y=this.world.viewheight;this.g.width=this.world.viewwidth;this.g.height=50;this.g.lineStyle(2,16777215,1);this.g.beginFill(16777215);this.g.moveTo(0,0);this.g.lineTo(this.world.viewwidth,0);this.g.endFill();a=new PIXI.Text("Thrust",{font:"20px Play",fill:"white",align:"left"});a.position.x=this.world.viewwidth-200;a.position.y=
5;this.thrustbar=new PIXI.Graphics;this.thrustbar.x=a.position.x+a.width+5;this.thrustbar.y=a.position.y;this.thrustbar.width=160;this.thrustbar.height=a.height;this.g.addChild(a);this.g.addChild(this.thrustbar);this.cachethrust=null;this.menleft=new PIXI.Text("99",{font:"20px Play",fill:"white",align:"left"});this.menleft.position.x=this.world.viewwidth-300;this.menleft.position.y=35;this.mensaved=new PIXI.Text("99",{font:"20px Play",fill:"white",align:"left"});this.mensaved.position.x=this.world.viewwidth-
200;this.mensaved.position.y=35;this.mendead=new PIXI.Text("99",{font:"20px Play",fill:"white",align:"left"});this.mendead.position.x=this.world.viewwidth-100;this.mendead.position.y=35;this.g.addChild(this.menleft);this.g.addChild(this.mensaved);this.g.addChild(this.mendead);a=PIXI.Texture.fromFrame("man_standing_1.png");this.manleftsprite=new PIXI.Sprite(a,12,24);this.manleftsprite.position.x=this.menleft.position.x+this.menleft.width+5;this.manleftsprite.position.y=this.menleft.position.y+this.menleft.height/
2-this.manleftsprite.height/2;this.manleftaction={acting:!1,increment:0,delta:0.1,frames:"man_standing_1.png man_jumping_1.png man_jumping_2.png man_jumping_3.png man_jumping_4.png man_jumping_5.png".split(" ")};this.manleftsprite.scale.x=0.75;this.manleftsprite.scale.y=0.75;a=PIXI.Texture.fromFrame("man_standing_1.png");this.mansavedsprite=new PIXI.Sprite(a,12,24);this.mansavedsprite.position.x=this.mensaved.position.x+this.mensaved.width+5;this.mansavedsprite.position.y=this.mensaved.position.y+
this.mensaved.height/2-this.mansavedsprite.height/2;this.mansavedaction={acting:!1,increment:0,delta:0.1,frames:"man_standing_1.png man_saluting_1.png man_saluting_2.png man_saluting_3.png man_saluting_4.png man_saluting_5.png man_saluting_6.png".split(" ")};this.mansavedsprite.scale.x=0.75;this.mansavedsprite.scale.y=0.75;a=PIXI.Texture.fromFrame("man_standing_1.png");this.mandeadsprite=new PIXI.Sprite(a,12,24);this.mandeadsprite.position.x=this.mendead.position.x+this.mendead.width+5;this.mandeadsprite.position.y=
this.mendead.position.y+this.mendead.height/2-this.mandeadsprite.height/2;this.mandeadsprite.scale.x=0.75;this.mandeadsprite.scale.y=0.75;this.mandeadaction={acting:!1,increment:0,delta:0.1,frames:"man_splat_1.png man_splat_2.png man_splat_3.png man_splat_4.png man_splat_5.png man_limb.png man_limb.png man_limb.png man_limb.png man_head.png".split(" ")};this.g.addChild(this.manleftsprite);this.g.addChild(this.mansavedsprite);this.g.addChild(this.mandeadsprite);this.wave=new PIXI.Text("Wave: 999",
{font:"20px Play",fill:"white",align:"left"});this.wave.position.x=5;this.wave.position.y=5;this.score=new PIXI.Text("Score: 0",{font:"20px Play",fill:"white",align:"left"});this.score.position.x=5;this.score.position.y=this.wave.height+10;this.g.addChild(this.wave);this.g.addChild(this.score);this.update();this.updateMen();this.updateWave();this.updateScore()}Status.constructor=Status;Status.prototype=Object.create(Object.prototype);
Status.prototype.cleanup=function(){this.particlesystem.getEmitter("scoreblooie")&&this.particlesystem.removeEmitter("scoreblooie");this.g.removeChildren();this.g.clear()};Status.prototype.cleanupTheDead=function(){this.mandeadsprite.visible=!0;this.mandeadaction.acting=!1};
Status.prototype.createParticle=function(a){var b=PIXI.Texture.fromFrame(this.mandeadaction.frames[Math.floor(Math.random()*this.mandeadaction.frames.length)]);a.sprite=new PIXI.Sprite(b,32,32);a.sprite.position.x=a.position.x;a.sprite.position.y=a.position.y;a.sprite.anchor.x=0.5;a.sprite.anchor.y=0.5;this.g.addChild(a.sprite)};Status.prototype.updateParticles=function(a,b){var c,d;for(c=0;c<b.length;c++)d=b[c],d.sprite.position.x=d.position.x,d.sprite.position.y=d.position.y,d.sprite.rotation=PARTSYS.degreesToRadians(d.angle)};
Status.prototype.removeParticle=function(a){this.g.removeChild(a.sprite);a.sprite=null};Status.prototype.updateThrust=function(){var a;a=this.world.player?this.world.player.playerfuel:4;this.cachethrust!==a&&(this.cachethrust=a,a=40*(a-1),this.thrustbar.clear(),this.thrustbar.lineStyle(1,16711680,1),this.thrustbar.beginFill(16711680),this.thrustbar.drawRect(0,0,a,this.thrustbar.height),this.thrustbar.endFill())};
Status.prototype.actMen=function(a,b){var c;b.acting&&(b.increment+=b.delta,b.increment>=b.frames.length&&(b.increment=b.frames.length-1,b.delta=-b.delta),0>b.increment&&(b.acting=!1,b.increment=0,b.delta=0.1),c=PIXI.Texture.fromFrame(b.frames[Math.floor(b.increment)]),a.setTexture(c))};Status.prototype.updateMen=function(){var a=0,b=0,c=0,d,e;for(d=0;d<this.world.men.length;d++)e=this.world.men[d].status,"saved"===e?c++:"dead"===e?b++:a++;this.mendead.setText(b);this.menleft.setText(a);this.mensaved.setText(c)};
Status.prototype.updateScore=function(){this.score.setText("Score: "+this.game.score)};Status.prototype.updateWave=function(){this.wave.setText("Wave: "+this.game.wave)};
Status.prototype.statusTick=function(a){0.1>Math.random()&&(this.manleftaction.acting=!0);0.1>Math.random()&&(this.mansavedaction.acting=!0);0.1>Math.random()&&!this.particlesystem.getEmitter("scoreblooie")&&(a=new PARTSYS.Emitter,a.x=this.mendead.position.x+this.mendead.width+20,a.y=this.mendead.position.y+10,a.area={xanchor:0.5,yanchor:0.5,width:1,height:1,radius:5},a.density={min:1,max:10},a.angle={min:0,max:359},a.speed={min:0.1,max:0.5},a.rotation=0,a.particlerotation={min:-2,max:2},a.bounded=
{x:a.x-10,y:a.y-10,width:20,height:20,type:"die"},a.maxparticles=10,a.dienoparticles=!0,a.lockparticles=!0,a.onCreateParticle=this.createParticle.bind(this),a.onUpdateParticles=this.updateParticles.bind(this),a.onRemoveParticle=this.removeParticle.bind(this),a.onCleanup=this.cleanupTheDead.bind(this),this.mandeadsprite.visible=!1,this.particlesystem.addEmitter("scoreblooie",a));this.updateScore();this.updateWave();this.updateMen()};
Status.prototype.update=function(){this.updateThrust();this.actMen(this.mansavedsprite,this.mansavedaction);this.actMen(this.manleftsprite,this.manleftaction);this.particlesystem.update()};
